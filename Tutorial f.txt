***********!!!!!!!!!!PERINGATAN!!!!!!!!!!!!!********** TAMPILANNYA JANGAN SAMA, PESAN DARI YANG MEMILIKI FILE INI !!!!!!!!!!!!!!!!!!!!!******

1. buka cmd / cd C:\laragon\www

2. composer create-project --prefer-dist laravel/laravel AplikasiPerpustakaan "8.*"

2. cd AplikasiPerpustakaan

4. code .

5. Model

php artisan make:model Kategori -mcr
php artisan make:model Penerbit -mcr
php artisan make:model Buku -mcr
php artisan make:model Peminjaman -mcr
php artisan make:model Pemberitahuan -mcr
php artisan make:model Pesan -mcr
php artisan make:model Identitas -mcr

6. database/migration/

User
		public function up()
    {
        Schema::create('users', function (Blueprint $table) {
            $table->id();
            $table->string('kode', 25);
            $table->char('nis', 20)->nullable();
            $table->string('fullname', 125);
            $table->string('username', 50)->unique();
            $table->text('password');
            $table->string('kelas', 50)->nullable();
            $table->text('alamat')->nullable();;
            $table->enum('verif', ['unverified', 'verified'])->default('unverified');
            $table->enum('role', ['admin', 'user']);
            $table->date('join_date');
            $table->date('terakhir_login')->nullable();
            $table->text('foto')->nullable();
            $table->rememberToken();
            $table->timestamps();
        });
    }

	Kategori
		public function up()
    {
        Schema::create('kategoris', function (Blueprint $table) {
            $table->id();
            $table->string('kode',50);
            $table->string('nama',125);
		$table->timestamps();
        });
    }

	Penerbit
		public function up()
    {
        Schema::create('penerbits', function (Blueprint $table) {
            $table->id();
            $table->string('kode' ,  125);
            $table->string('nama' , 50);
            $table->enum('verif', ['verified', 'unverified'])->default('unverified');
		$table->timestamps();
        });
    }
	
	Buku
		public function up()
    {
        Schema::create('bukus', function (Blueprint $table) {
            $table->id();
            $table->string('judul' , 125);
            $table->foreignId('kategori_id')->constrained()->onUpdate('cascade')->onDelete('cascade');
            $table->foreignId('penerbit_id')->constrained()->onUpdate('cascade')->onDelete('cascade');
            $table->string('pengarang' , 125);
            $table->year('tahun_terbit');
            $table->string('isbn' , 50)->nullable();
            $table->integer('j_buku_baik');
            $table->integer('j_buku_rusak');
            $table->text('foto')->nullable();
		$table->timestamps();
        });
    }

	Peminjaman
		public function up()
    {
        Schema::create('peminjamen', function (Blueprint $table) {
            $table->id();
            $table->foreignId('user_id')->constrained()->onUpdate('cascade')->onDelete('cascade');
            $table->foreignId('buku_id')->constrained()->onUpdate('cascade')->onDelete('cascade');
            $table->date('tanggal_peminjaman');
            $table->date('tanggal_pengembalian')->nullable();
            $table->enum('kondisi_buku_saat_dipinjam', ['baik', 'rusak']);
            $table->enum('kondisi_buku_saat_dikembalikan', ['baik', 'rusak' , 'hilang'])->nullable();
            $table->float('denda')->nullable();
            $table->timestamps();
        });
    }
	
	Pemberitahuan
		public function up()
    {
        Schema::create('pemberitahuans', function (Blueprint $table) {
            $table->id();
            $table->text('isi');
            $table->string('level_user', 125)->nullable();
            $table->enum('status', ['aktif', 'nonaktif'])->nullable();
            $table->timestamps();
        });
    }

	Pesan
		public function up()
    {
        Schema::create('pesans', function (Blueprint $table) {
            $table->id();
            $table->foreignId('penerima_id')->constrained('users')->onDelete('cascade');
            $table->foreignId('pengirim_id')->constrained('users')->onDelete('cascade');
            $table->string('judul', 50);
            $table->text('isi');
            $table->enum('status', ['terkirim', 'dibaca'])->default('terkirim');
            $table->date('tanggal_kirim');
            $table->timestamps();
        });
    }

	Identitas 
		public function up()
    {
        Schema::create('identitas', function (Blueprint $table) {
            $table->id();
            $table->string('nama_app', 50);
            $table->text('alamat_app');
            $table->string('email_app', 125);
            $table->char('nomor_hp', 50);
            $table->text('foto')->nullable();
		$table->timestamps();
        });
    }

7. php artisan migrate

8. composer require laravel/ui:^3.4.6

9. php artisan ui bootstrap

10. php artisan ui:auth

11. npm install && npm run dev

12. npm run dev

13. php artisan make:seeder FirstSeeder

14. database/seeders/DatabaseSeeder

	$this->call(FirstSeeder::class);

database/seeders/FirstbaseSeeder

<?php

namespace Database\Seeders;

use App\Models\Buku;
use App\Models\Identitas;
use App\Models\Kategori;
use App\Models\Pemberitahuan;
use App\Models\Peminjaman;
use App\Models\Penerbit;
use App\Models\Pesan;
use App\Models\User;
use Illuminate\Database\Seeder;

class FirstSeeder extends Seeder
{
    /**
     * Run the database seeds.
     *
     * @return void
     */
    public function run()
    {
        User::create([
            'kode' => 'Admin1',
            'fullname' => 'Admin',
            'username' => 'Admin',
            'password' => bcrypt('password'),
            'verif' => 'verified',
            'role' => 'admin',
            'join_date' => '2023-01-06',
            'foto' => '',
        ]);
        User::create([
            'kode' => 'A01',
            'nis' => '12345',
            'fullname' => 'Nab',
            'username' => 'Nab',
            'password' => bcrypt('Nab'),
            'kelas' => 'XII RPL',
            'alamat' => 'Jakarta',
            'verif' => 'verified',
            'role' => 'user',
            'join_date' => date('Y-m-d H:i:s'),
            'foto' => '',
        ]);
        User::create([
            'kode' => 'A0',
            'nis' => '67890',
            'fullname' => 'Kat',
            'username' => 'Kat',
            'password' => bcrypt('Kat'),
            'kelas' => 'XI RPL',
            'alamat' => 'Timur',
            'role' => 'user',
            'join_date' => date('Y-m-d H:i:s'),
            'foto' => '',
        ]);

        Kategori::create([
            'kode' => 'umum',
            'nama' => 'Umum'
        ]);
        Kategori::create([
            'kode' => 'sains',
            'nama' => 'Sains'
        ]);
        Kategori::create([
            'kode' => 'sejarah',
            'nama' => 'Sejarah'
        ]);

        Penerbit::create([
            'kode' => 'erlangga',
            'nama' => 'Erlangga',
        ]);
        Penerbit::create([
            'kode' => 'bse',
            'nama' => 'BSE',
        ]);
        Penerbit::create([
            'kode' => 'gramedia',
            'nama' => 'Gramedia',
        ]);

        Buku::create([
            'judul' => 'Cara Memasak Nasi',
            'kategori_id' => 1,
            'penerbit_id' => 1,
            'pengarang' => 'A',
            'tahun_terbit' => '2022',
            'isbn' => '3432423',
            'j_buku_baik' => 20,
            'j_buku_rusak' => 0,
            'foto' => ''
        ]);
        Buku::create([
            'judul' => 'Ensiklopedia Luar Angkasa',
            'kategori_id' => 2,
            'penerbit_id' => 2,
            'pengarang' => 'B',
            'tahun_terbit' => '2021',
            'isbn' => '9473272',
            'j_buku_baik' => 10,
            'j_buku_rusak' => 5,
            'foto' => ''
        ]);
        Buku::create([
            'judul' => 'Api Sejarah',
            'kategori_id' => 3,
            'penerbit_id' => 3,
            'pengarang' => 'C',
            'tahun_terbit' => '2017',
            'isbn' => '4320423',
            'j_buku_baik' => 10,
            'j_buku_rusak' => 3,
            'foto' => ''
        ]);

        Peminjaman::create([
            'user_id' =>  2,
            'buku_id' =>  1,
            'tanggal_peminjaman' => '2022-09-01 23:09:02',
            'kondisi_buku_saat_dipinjam' =>  'baik',
        ]);
        Peminjaman::create([
            'user_id' =>  3,
            'buku_id' =>  2,
            'tanggal_peminjaman' => '2022-09-01 23:09:02',
            'kondisi_buku_saat_dipinjam' =>  'baik',
            // 'kondisi_buku_saat_dikembalikan' =>  'rusak',
            // 'denda' => 20000
        ]);
        Peminjaman::create([
            'user_id' =>  2,
            'buku_id' =>  3,
            'tanggal_peminjaman' => '2022-09-01 23:09:02',
            'tanggal_pengembalian' =>  '2022-09-01 23:09:02',
            'kondisi_buku_saat_dipinjam' =>  'baik',
            // 'denda' => 50000
        ]);

        Pemberitahuan::create([
            'isi' => 'Maaf, perpus sedang tutup. Hanya menerima pengembalian',
            'status' => 'aktif',
        ]);
        Pemberitahuan::create([
            'isi' => 'Maaf server sedang maintance',
            'status' => 'nonaktif',
        ]);
        Pemberitahuan::create([
            'isi' => 'Pengembalian buku paket sampai tanggal 30 Januari 2023',
            'status' => 'aktif',
        ]);

        Pesan::create([
            'penerima_id' => '2',
            'pengirim_id' => '1',
            'judul' => 'Buku dipinjam',
            'isi' => 'Buku sedang dipinjam, harap mengembalikan sebelum 30 hari ',
            'status' => 'terkirim',
            'tanggal_kirim' => '2022-09-01',
        ]);
        Pesan::create([
            'penerima_id' => '3',
            'pengirim_id' => '1',
            'judul' => 'Anda merusakan buku',
            'isi' => 'Anda kena denda 100000',
            'status' => 'terkirim',
            'tanggal_kirim' => '2022-09-01',
        ]);
        Pesan::create([
            'penerima_id' => '2',
            'pengirim_id' => '1',
            'judul' => 'Buku telah dikembalikan',
            'isi' => 'Terimakasih telah meminjam buku di perpus',
            'status' => 'dibaca',
            'tanggal_kirim' => '2022-09-01',
        ]);

        Identitas::create([
            'nama_app' => 'PERPUSTAKAAN SMKN 10 JAKARTA',
            'alamat_app' => 'Jl. SMEA 6, Cawang, Kramat Jati, Jakarta Timur',
            'email_app' => 'email@smkn10jakarta.sch.id',
            'nomor_hp' => '081234658',
            'foto' => '',
        ]);
    }
}

15. php artisan migrate --seed

16. routes/web.php

<?php

use App\Http\Controllers\Admin\AdministratorController;
use App\Http\Controllers\Admin\AnggotaController;
use App\Http\Controllers\Admin\DashboardController as AdminDashboardController;
use App\Http\Controllers\Admin\DatabukuController;
use App\Http\Controllers\Admin\IdentitasController;
use App\Http\Controllers\Admin\KategoriController;
use App\Http\Controllers\Admin\LaporanController;
use App\Http\Controllers\Admin\PeminjamanController as AdminPeminjamanController;
use App\Http\Controllers\Admin\PenerbitController;
use App\Http\Controllers\Admin\Pesan;
use App\Http\Controllers\Admin\PesanController as AdminPesanController;
use App\Http\Controllers\User\DashboardController;
use App\Http\Controllers\User\PeminjamanController;
use App\Http\Controllers\User\PengembalianController;
use App\Http\Controllers\User\PesanController;
use App\Http\Controllers\User\ProfileController;
use App\Http\Controllers\UserRegister;
use App\Models\Kategori;
use Illuminate\Support\Facades\Auth;
use Illuminate\Support\Facades\Route;

/*
|--------------------------------------------------------------------------
| Web Routes
|--------------------------------------------------------------------------
|
| Here is where you can register web routes for your application. These
| routes are loaded by the RouteServiceProvider within a group which
| contains the "web" middleware group. Now create something great!
|
*/

Route::get('/', function () {
    return redirect(route('login'));
});

Auth::routes();

Route::get('/home', function () {
    if (Auth::user()->role == 'admin') {

        return redirect()->route('admin.dashboard');
    }
    if (Auth::user()->role == 'user') {

        return redirect()->route('user.dashboard');
    }
})->middleware('auth');

Route::post('/register', [UserRegister::class, 'userRegister'])->name('user.register');

//Admin
Route::middleware(['auth', 'role:admin'])->prefix('/admin')->group(function () {
    Route::get('/dashboard', [AdminDashboardController::class, 'index'])->name('admin.dashboard');

    //- - - - - - - - - MasterData - - - - - - - - - -
    //                [ Anggota ]
    Route::get('/anggota', [AnggotaController::class, 'index'])->name('admin.anggota');
    Route::post('/tambah-anggota', [AnggotaController::class, 'store'])->name('admin.tambah_anggota');
    Route::put('/edit/anggota/{id}', [AnggotaController::class, 'update'])->name('admin.update.anggota');
    Route::delete('/hapus/anggota/{id}', [AnggotaController::class, 'delete']);
    Route::put('/update_status/{id}', [AnggotaController::class, 'update_status'])->name('admin.update_status');

    //                [ Penerbit ]
    Route::get('/penerbit', [PenerbitController::class, 'index'])->name('admin.penerbit');
    Route::post('/tambah-penerbit', [PenerbitController::class, 'store'])->name('admin.tambah_penerbit');
    Route::put('/edit/penerbit/{id}', [PenerbitController::class, 'update'])->name('admin.update_penerbit');
    Route::post('/update_status/{id}', [PenerbitController::class, 'updateStatus'])->name('admin.update_status_penerbit');
    Route::delete('/hapus/penerbit/{id}', [PenerbitController::class, 'delete']);

    //                [ Administrator ]
    Route::get('/administrator', [AdministratorController::class, 'index'])->name('admin.administrator');
    Route::post('/tambah-admin', [AdministratorController::class, 'store'])->name('admin.tambah_admin');
    Route::put('/edit/admin/{id}', [AdministratorController::class, 'update'])->name('admin.update_admin');
    Route::delete('/hapus/admin/{id}', [AdministratorController::class, 'delete']);

    //                [ Data Peminjaman ]
    Route::get('/data-peminjaman', [AdminPeminjamanController::class, 'index'])->name('admin.peminjaman');

    //- - - - - - - - - Katalog Buku - - - - - - - - - -
    //                [ Data Buku ]
    Route::get('/buku', [BukuController::class, 'index'])->name('admin.buku');
    Route::post('/tambah-buku', [BukuController::class, 'store'])->name('admin.tambah_buku');
    Route::put('/edit/buku/{id}', [BukuController::class, 'update'])->name('admin.update.buku');
    Route::delete('/hapus/buku/{id}', [BukuController::class, 'delete']);
    //                [ Kategori ]
    Route::get('/kategori', [KategoriController::class, 'index'])->name('admin.kategori');
    Route::post('/tambah-kategori', [KategoriController::class, 'store'])->name('admin.tambah_kategori');
    Route::put('/edit/kategori/{id}', [KategoriController::class, 'update'])->name('admin.update_kategori');
    Route::delete('/hapus/kategori/{id}', [KategoriController::class, 'delete']);

    //- - - - - - - - - Cetak Laporan- - - - - - - - - -
    //                [ Laporan PDF]
    Route::get('/index', [LaporanController::class, 'index'])->name('admin.index');
    Route::post('/laporan-pdf', [LaporanController::class, 'laporan_pdf'])->name('admin.lap_pdf');

    Route::post('/peminjaman', [LaporanController::class, 'laporan_pdf'])->name('admin.laporan_peminjaman');
    Route::post('/pengembalian', [LaporanController::class, 'laporan_pdf'])->name('admin.laporan_pengembalian');
    Route::post('/laporan_user', [LaporanController::class, 'laporan_pdf'])->name('admin.laporan_user');
    //                [ Laporan Excel]
    Route::post('laporan-excel', [LaporanController::class, 'laporan_excel'])->name('admin.laporan_excel');
    Route::post('/excel-pengembalian', [LaporanController::class, 'excelPengembalian'])->name('admin.excel_pengembalian');
    Route::post('/excel-user', [LaporanController::class, 'excelUser'])->name('admin.excel_user');

    //                [ Identitas Applikasi]
    Route::get('/indexIdentitas', [IdentitasController::class, 'index'])->name('admin.identitas');
    Route::put('/edit/identitas', [IdentitasController::class, 'update'])->name('admin.update_identitas');

    //- - - - - - - - - Pesan - - - - - - - - - -
    Route::get('/pesan-masuk', [AdminPesanController::class, 'pesanMasuk'])->name('admin.pesan_masuk');
    Route::post('/ubah-status', [AdminPesanController::class, 'ubah_status'])->name('admin.ubah_status');

    Route::get('/pesan-terkirim', [AdminPesanController::class, 'pesanTerkirim'])->name('admin.pesan_terkirim');
    Route::post('/kirim-pesan', [AdminPesanController::class, 'kirimPesan'])->name('admin.kirim_pesan');

});

//User
Route::middleware(['auth', 'role:user'])->prefix('/user')->group(function () {
    Route::get('/dashboard', [DashboardController::class, 'index'])->name('user.dashboard');

    //Peminjaman
    Route::get('riwayat-peminjaman', [PeminjamanController::class, 'riwayatPeminjaman'])->name('user.riwayat_peminjaman');

    Route::get('form-peminjaman', [PeminjamanController::class, 'peminjamanForm'])->name('user.form_peminjaman');
    Route::post('form-dari-dashboard', [PeminjamanController::class, 'formDasboard'])->name('user.form_peminjaman_dashboard');
    Route::post('submit-form', [PeminjamanController::class, 'submitForm'])->name('user.submit_peminjaman');

    //Pengembalian
    Route::get('riwayat-pengembalian', [PengembalianController::class, 'riwayatPengembalian'])->name('user.riwayat_pengembalian');

    Route::get('form-pengembalian', [PengembalianController::class, 'form_pengembalian'])->name('user.form_pengembalian');
    Route::post('submit-pengembalian', [PengembalianController::class, 'submit_pengembalian'])->name('user.submit_pengembalian');

    //Pesan
    Route::get('/pesan-terkirim', [PesanController::class, 'pesan_terkirim'])->name('user.pesan_terkirim');
    Route::post('/kirim-pesan', [PesanController::class, 'kirim_pesan'])->name('user.kirim_pesan');

    Route::get('/pesan-masuk', [PesanController::class, 'pesan_masuk'])->name('user.pesan_masuk');
    Route::post('/ubah-status', [PesanController::class, 'ubah_status'])->name('user.ubah_status');

    //PROFILE
    Route::get('profile', [ProfileController::class, 'profile'])->name('user.profile');
    Route::put('gambar', [ProfileController::class, 'gambar'])->name('user.gambar');
});

		LOGIN

17. app/http/controllers/auth/logincontroller.php

<?php

namespace App\Http\Controllers\Auth;

use App\Http\Controllers\Controller;
use App\Providers\RouteServiceProvider;
use Carbon\Carbon;
use Illuminate\Foundation\Auth\AuthenticatesUsers;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;
use Illuminate\Support\Facades\Session;

class LoginController extends Controller
{
    /*
    |--------------------------------------------------------------------------
    | Login Controller
    |--------------------------------------------------------------------------
    |
    | This controller handles authenticating users for the application and
    | redirecting them to your home screen. The controller uses a trait
    | to conveniently provide its functionality to your applications.
    |
    */

    use AuthenticatesUsers;

    /**
     * Where to redirect users after login.
     *
     * @var string
     */
    protected $redirectTo = RouteServiceProvider::HOME;

    /**
     * Create a new controller instance.
     *
     * @return void
     */
    public function __construct()
    {
        $this->middleware('guest')->except('logout');
    }

    public function username()
    {
        return 'username';
    }

    public function authenticated(Request $request, $user){
        if ($user->role == 'admin'){
            // update last login time
            $user->update([
                'terakhir_login' => Carbon::now()
            ]);

            return redirect()->route('admin.dashboard');
        }

        if ($user->verif == "unverified"){
            Session::flush();
            Auth::logout();
            return redirect()->back()->with('status', 'danger')->with('message', 'Gagal Login, Unverified User');
        }

        return redirect()->route(
            'user.dashboard'
        );
    }
}

18. resource/views/auth/login

@extends('layouts.app')

@section('content')
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header">{{ __('Login') }}</div>

                    <div class="card-body">
                        @if (session('status'))
                            <div class="alert alert-{{ session('status') }} alert-dismissible fade show" role="alert">
                                {{ session('message') }}

                                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close">
                                </button>
                            </div>
                        @endif
                        <form method="POST" action="{{ route('login') }}">
                            @csrf

                            <div class="row mb-3">
                                <label for="username"
                                    class="col-md-4 col-form-label text-md-end">{{ __('Username') }}</label>

                                <div class="col-md-6">
                                    <input id="username" type="text"
                                        class="form-control @error('username') is-invalid @enderror" name="username"
                                        value="{{ old('username') }}" required autocomplete="username" autofocus>

                                    @error('username')
                                        <span class="invalid-feedback" role="alert">
                                            <strong>{{ $message }}</strong>
                                        </span>
                                    @enderror
                                </div>
                            </div>

                            <div class="row mb-3">
                                <label for="password"
                                    class="col-md-4 col-form-label text-md-end">{{ __('Password') }}</label>

                                <div class="col-md-6">
                                    <input id="password" type="password"
                                        class="form-control @error('password') is-invalid @enderror" name="password"
                                        required autocomplete="current-password">

                                    @error('password')
                                        <span class="invalid-feedback" role="alert">
                                            <strong>{{ $message }}</strong>
                                        </span>
                                    @enderror
                                </div>
                            </div>

                            <div class="row mb-3">
                                <div class="col-md-6 offset-md-4">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" name="remember" id="remember"
                                            {{ old('remember') ? 'checked' : '' }}>

                                        <label class="form-check-label" for="remember">
                                            {{ __('Remember Me') }}
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <div class="row mb-0">
                                <div class="col-md-8 offset-md-4">
                                    <button type="submit" class="btn btn-primary">
                                        {{ __('Login') }}
                                    </button>

                                    @if (Route::has('password.request'))
                                        <a class="btn btn-link" href="{{ route('password.request') }}">
                                            {{ __('Forgot Your Password?') }}
                                        </a>
                                    @endif
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
@endsection

19. php artisan make:middleware Role

20. app/http/middleware/role.php 

<?php

namespace App\Http\Middleware;

use Closure;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;

class Role
{
    /**
     * Handle an incoming request.
     *
     * @param  \Illuminate\Http\Request  $request
     * @param  \Closure(\Illuminate\Http\Request): (\Illuminate\Http\Response|\Illuminate\Http\RedirectResponse)  $next
     * @return \Illuminate\Http\Response|\Illuminate\Http\RedirectResponse
     */
    public function handle(Request $request, Closure $next, $role)
    {
        if (Auth::User()->role == $role) {
            return $next($request);
        }

        if ($request->wantsJson()) {
            return response()->json(
                [
                    "message" => "Forbidden Access"
                ]
            );
        }
        abort(403);
    }
}

21. Kernel

use App\Http\Middleware\Role;

'role' => Role::class

22. app/Models/...

	Buku

protected $fillable = [
        'judul',
        'kategori_id',
        'penerbit_id',
        'pengarang',
        'tahun_terbit',
        'isbn',
        'j_buku_baik',
        'j_buku_rusak',
        'foto'
    ];

    public $timestamps = false;

    public function kategori(){
        return $this->belongsTo(Kategori::class);
    }

    public function penerbit(){
        return $this->belongsTo(Penerbit::class);
    }

    public function peminjamans(){
        return $this->hasMany(Peminjaman::class);
    }

	Identitas

protected $fillable = [
        'nama_app',
        'alamat_app',
        'email_app',
        'nomor_hp',
        'foto'
    ];

	Kategori

protected $fillable = [
        'kode',
        'nama'
    ];

    public function bukus(){
        return $this->hasMany(Buku::class);
    }

	Pemberitahuan

protected $fillable = [
        'isi',
        'level_user',
        'status'
    ];

	Peminjaman

protected $fillable = [
        'user_id',
        'buku_id',
        'tanggal_peminjaman',
        'tanggal_pengembalian',
        'kondisi_buku_saat_dipinjam',
        'kondisi_buku_saat_dikembalikan',
        'denda',
    ];

    public $timestamps = false;

    public function user(){
        return $this->belongsTo(User::class);
    }

    public function buku(){
        return $this->belongsTo(Buku::class);
    }

	Penerbit

protected $fillable = [
        'kode',
        'nama',
        'verif'
    ];

    public function bukus(){
        return $this->hasMany(Buku::class);
    }

	Pesan

protected $fillable = [
        'penerima_id',
        'pengirim_id',
        'judul',
        'isi',
        'status',
        'tanggal_kirim'

    ];

    public function users(){
        return $this->belongsTo(User::class);
    }

    public function penerima(){
        return $this->belongsTo(User::class, 'penerima_id', 'id');
    }

    public function pengirim(){
        return $this->belongsTo(User::class, 'pengirim_id', 'id');
    }
	
	User

protected $fillable = [
        'kode',
        'nis',
        'fullname',
        'username',
        'password',
        'kelas',
        'alamat',
        'verif',
        'role',
        'join_date',
        'terakhir_login',
        'foto'
    ];
    
    public function pengirim(){
        return $this->hasOne(Pesan::class, 'pengirim_id');
    }

    public function penerima(){
        return $this->hasMany(Pesan::class, 'penerima_id');
    }

    public function peminjamans(){
        return $this->hasMany(Peminjaman::class);
    }

    /**
     * The attributes that should be hidden for serialization.
     *
     * @var array<int, string>
     */
    protected $hidden = [
        'password',
        'remember_token',
    ];

    /**
     * The attributes that should be cast.
     *
     * @var array<string, string>
     */
    protected $casts = [
        'email_verified_at' => 'datetime',
    ];

23. Mazer

mazer->releases/template.zip
buka src/assests move to public

24. Sider

views/layouts -> master.blade.php

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard - Mazer Admin Dashboard</title>

    <link rel="stylesheet" href="/assets/css/main/app.css" />
    <link rel="stylesheet" href="/assets/css/main/app-dark.css" />
    <link rel="shortcut icon" href="/assets/images/logo/favicon.svg" type="image/x-icon" />
    <link rel="shortcut icon" href="/assets/images/logo/favicon.png" type="image/png" />

    <link rel="stylesheet" href="/assets/css/shared/iconly.css" />
    <link rel="stylesheet" href="/assets/css/pages/simple-datatables.css">
    <link rel="stylesheet" href="/assets/css/pages/form-element-select.css">


    <style>
        .badge-notification {
            padding: 3px;
            position: absolute;
            right: 20px;
        }
    </style>

    <style>
        .choices__input {
            color: black;
        }
    </style>
</head>

@php

    use App\Models\Pesan;
    $pesan = Pesan::where('penerima_id', Auth::user()->id)
        ->where('status', 'terkirim')
        ->get();
    use App\Models\Pemberitahuan;
    $pemberitahuan = Pemberitahuan::orderBy('id', 'DESC')
        ->take(5)
        ->get();

    // use App\Models\Peminjaman;
    // $peminjaman = Peminjaman::where('user_id'  $request->user_id)
    // ->take()
    // ->get();

@endphp

<body>
    <script src="/assets/js/initTheme.js"></script>
    <div id="app">
        <div id="sidebar" class="active">
            <div class="sidebar-wrapper active">
                <div class="sidebar-header position-relative">
                    <div class="d-flex justify-content-between align-items-center">
                        <div class="logo">
                            <a href="index.html"><img src="/assets/images/logo/logo.svg" alt="Logo"
                                    srcset=""></a>
                        </div>
                        <div class="theme-toggle d-flex gap-2  align-items-center mt-2">
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                aria-hidden="true" role="img" class="iconify iconify--system-uicons" width="20"
                                height="20" preserveAspectRatio="xMidYMid meet" viewBox="0 0 21 21">
                                <g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path
                                        d="M10.5 14.5c2.219 0 4-1.763 4-3.982a4.003 4.003 0 0 0-4-4.018c-2.219 0-4 1.781-4 4c0 2.219 1.781 4 4 4zM4.136 4.136L5.55 5.55m9.9 9.9l1.414 1.414M1.5 10.5h2m14 0h2M4.135 16.863L5.55 15.45m9.899-9.9l1.414-1.415M10.5 19.5v-2m0-14v-2"
                                        opacity=".3"></path>
                                    <g transform="translate(-210 -1)">
                                        <path d="M220.5 2.5v2m6.5.5l-1.5 1.5"></path>
                                        <circle cx="220.5" cy="11.5" r="4"></circle>
                                        <path d="m214 5l1.5 1.5m5 14v-2m6.5-.5l-1.5-1.5M214 18l1.5-1.5m-4-5h2m14 0h2">
                                        </path>
                                    </g>
                                </g>
                            </svg>
                            <div class="form-check form-switch fs-6">
                                <input class="form-check-input  me-0" type="checkbox" id="toggle-dark">
                                <label class="form-check-label"></label>
                            </div>
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                aria-hidden="true" role="img" class="iconify iconify--mdi" width="20"
                                height="20" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24">
                                <path fill="currentColor"
                                    d="m17.75 4.09l-2.53 1.94l.91 3.06l-2.63-1.81l-2.63 1.81l.91-3.06l-2.53-1.94L12.44 4l1.06-3l1.06 3l3.19.09m3.5 6.91l-1.64 1.25l.59 1.98l-1.7-1.17l-1.7 1.17l.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95l2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85c-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14c.4-.4.82-.76 1.27-1.08c.75-.53 1.93.36 1.85 1.19c-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82c-2.81 3.14-2.7 7.96.31 10.98c3.02 3.01 7.84 3.12 10.98.31Z">
                                </path>
                            </svg>
                        </div>
                        <div class="sidebar-toggler  x">
                            <a href="#" class="sidebar-hide d-xl-none d-block"><i
                                    class="bi bi-x bi-middle"></i></a>
                        </div>
                    </div>
                </div>
                <div class="sidebar-menu">
                    @if (Auth::user()->role == 'admin')
                        @include('components.admin.sidebar')
                    @else
                        @include('components.user.sidebar')
                    @endif
                </div>
            </div>
        </div>

        <div id="main" class="layout-navbar">
            <header class="mb-3">
                <nav class="navbar navbar-expand navbar-light navbar-top">
                    <div class="container-fluid">
                        <a href="#" class="burger-btn d-block">
                            <i class="bi bi-justify fs-3"></i>
                        </a>

                        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                            data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                            aria-expanded="false" aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse" id="navbarSupportedContent">
                            <ul class="navbar-nav ms-auto mb-lg-0">
                                <li class="nav-item dropdown me-1">
                                    <a class="nav-link active dropdown-toggle text-gray-600" href="#"
                                        data-bs-toggle="dropdown" aria-expanded="false">
                                        <i class="bi bi-envelope bi-sub fs-4"></i>
                                        <span class="badge badge-notification bg-danger">

                                            {{ count($pesan) }}
                                        </span>
                                    </a>
                                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenuButton">
                                        @php
                                            $pesans = \App\Models\Pesan::where('status', 'terkirim')
                                                ->where('pengirim_id', '!=', Auth::user()->id)
                                                ->where('penerima_id', Auth::user()->id)
                                                ->orderBy('created_at', 'desc')
                                                ->get();
                                        @endphp

                                        <li>
                                            <h6 class="dropdown-header">Mail</h6>
                                        </li>
                                        @foreach ($pesan as $p)
                                            <li>
                                                <form action="{{ Auth::user()->role == 'user' ? route('user.ubah_status') : route('admin.ubah_status') }}" method="POST">
                                                    @csrf <button class="dropdown-item" type="submit"> <input
                                                            type="hidden" name="id"
                                                            value="{{ $p->id }}">
                                                        <div class="row">
                                                            <div class="col-3">
                                                                <div class="user-img d-flex align-items-center">
                                                                    <div class="avatar avatar-lg"> <img
                                                                            src="/assets/images/faces/1.jpg">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col ms-2">
                                                                <p class="mb-0 font-bold">
                                                                    {{ $p->pengirim->username }}</p>
                                                                <p class="mt-0 mb-0 font-thin text-sm">
                                                                    {{ $p->isi }}</p>
                                                            </div>
                                                        </div>
                                                    </button> </form>
                                            </li>
                                        @endforeach

                                        @if (count($pesan) == 0)
                                            <li><a class="dropdown-item" href="#">
                                                    No New Mail
                                                </a>
                                            </li>
                                        @endif
                                    </ul>
                                </li>
                                @if (Auth::user()->role == 'admin')
                                    <li class="nav-item dropdown me-3">
                                        <a class="nav-link active dropdown-toggle text-gray-600" href="#"
                                            data-bs-toggle="dropdown" aria-expanded="false">

                                            <i class="bi bi-bell fs-4"></i> <span
                                                class="badge badge-notification bg-danger">

                                                {{ count($pemberitahuan) }}
                                            </span>
                                        </a>

                                        <ul class="dropdown-menu dropdown-menu-end"
                                            aria-labelledby="dropdownMenuButton">
                                            @if (count($pemberitahuan) == 0)
                                                <li><a class="dropdown-item" href="#">
                                                        No New Pemberitahuan
                                                    </a>
                                                </li>
                                            @else
                                                @foreach ($pemberitahuan as $infoPemberitahuan)
                                                    <li class="dropdown-item notification-item">
                                                        <a class="d-flex align-items-center" href="#">
                                                            <div class="notification-icon bg-primary">

                                                                @if ($infoPemberitahuan->status == 'peminjaman')
                                                                    {{-- <i class="bi bi-belld-fill align-middle"></i> --}}
                                                                    <i class="bi bi-person"></i>
                                                                @else
                                                                    <i class="bi bi-arrow-repeat align-middle"></i>
                                                                @endif
                                                            </div>
                                                            <div class="notification-text ms-4">
                                                                <p class="notification-subtitle font-thin text-sm">
                                                                    {{ $infoPemberitahuan->isi }}
                                                                </p>
                                                            </div>
                                                        </a>
                                                    </li>
                                                @endforeach
                                            @endif
                                        </ul>
                                    </li>
                                @endif
                                <div class="dropdown">
                                    <a href="#" data-bs-toggle="dropdown" aria-expanded="false">
                                        <div class="user-menu d-flex">
                                            <div class="user-name text-end me-3">
                                                <h6 class="mb-0 text-gray-600">{{ Auth::user()->username }}</h6>
                                                <p class="mb-0 text-sm text-gray-600">{{ Auth::user()->role }}</p>
                                            </div>
                                            <div class="user-img d-flex align-items-center">
                                                <div class="avatar avatar-md">
                                                    @if (Auth::user()->foto != '')
                                                        <img src="{{ asset('/img/' . Auth::user()->foto) }}"
                                                            alt="" srcset="">
                                                    @else
                                                        <img src="assets/images/faces/1.jpg" alt="Face 1">
                                                    @endif
                                                </div>
                                            </div>
                                        </div>
                                    </a>
                                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenuButton"
                                        style="min-width: 11rem">
                                        <li>
                                            <h6 class="dropdown-header">Hello, {{ Auth::user()->username }}!</h6>
                                        </li>
                                        <li>
                                            <a class="dropdown-item" href="#"><i
                                                    class="icon-mid bi bi-person me-2"></i> My
                                                Profile</a>
                                        </li>

                                        <li>
                                            <hr class="dropdown-divider" />
                                        </li>
                                        <li>
                                            <a class="dropdown-item" href="{{ route('logout') }}"
                                                onclick="event.preventDefault();
                            document.getElementById('logout-form').submit();"
                                                class="sidebar-link">
                                                <i class="icon-mid bi bi-box-arrow-left me-2"></i>
                                                <span>Logout</span>
                                            </a>

                                            <form id="logout-form" action="{{ route('logout') }}" method="POST"
                                                class="d-none">
                                                @csrf
                                            </form>
                                        </li>
                                    </ul>
                                </div>
                        </div>
                    </div>
                </nav>
            </header>

            <div id="main-content">
                @yield('content')
            </div>

        </div>
    </div>
    <script src="/assets/js/bootstrap.js"></script>
    <script src="/assets/js/app.js"></script>
    <script src="/assets/extensions/simple-datatables/umd/simple-datatables.js"></script>
    <script src="/assets/js/pages/simple-datatables.js"></script>

    <!-- Need: Apexcharts -->
    <script src="/assets/extensions/apexcharts/apexcharts.min.js"></script>
    <script src="/assets/js/pages/dashboard.js"></script>

    <script src="assets/js/app.js"></script>
    <script src="/assets/js/extensions/simple-datatables.js"></script>

    <script src="/assets/extensions/choices.js/public/assets/scripts/choices.js"></script>

    <script src="/assets/js/extensions/form-element-select.js"></script>

</body>

</html>

25. views/components admin & user / sidebar.blade.php

admin

<ul class="menu">
    <li class="sidebar-title">MAIN MENU</li>

    <li class="sidebar-item active ">
        <a href="{{ route('admin.dashboard') }}" class='sidebar-link'>
            <i class="bi bi-grid-fill"></i>
            <span>Dashboard</span>
        </a>
    </li>

    <li class="sidebar-item  has-sub">
        <a href="#" class='sidebar-link'>
            <i class="bi bi-app-indicator"></i>
            <span>Master Data</span>
        </a>
        <ul class="submenu ">
            <li class="submenu-item ">
                <a href="{{ Route('admin.anggota') }}">Data Anggota</a>
            </li>
            <li class="submenu-item ">
                <a href="{{ Route('admin.penerbit') }}">Data Penerbit</a>
            </li>
            <li class="submenu-item ">
                <a href="{{ Route('admin.administrator') }}">Administrator</a>
            </li>
            <li class="submenu-item ">
                <a href="{{ Route('admin.peminjaman') }}">Data Peminjaman</a>
            </li>
        </ul>
    </li>

    <li class="sidebar-item  has-sub">
        <a href="#" class='sidebar-link'>
            <i class="bi bi-bookmarks"></i>
            <span>Katalog Buku</span>
        </a>
        <ul class="submenu ">
            <li class="submenu-item ">
                <a href="{{ Route('admin.buku') }}">Data Buku</a>
            </li>
            <li class="submenu-item ">
                <a href="{{ Route('admin.kategori') }}">Kategori Buku</a>
            </li>
        </ul>
    </li>

    <li class="sidebar-item  ">
        <a href="{{ Route('admin.index') }}" class='sidebar-link'>
            <i class="bi bi-clipboard-data"></i>
            <span>Laporan Perpustakaan</span>
        </a>
    </li>

    <li class="sidebar-title">LAIN LAIN</li>

    <li class="sidebar-item  ">
        <a href="{{ Route('admin.identitas') }}" class='sidebar-link'>
            <i class="bi bi-receipt"></i>
            <span>Identitas Aplikasi</span>
        </a>
    </li>

    <li class="sidebar-item  has-sub">
        <a href="#" class='sidebar-link'>
            <i class="bi bi-chat-left-text"></i>
            <span>Pesan</span>
        </a>
        <ul class="submenu ">
            <li class="submenu-item ">
                <a href="{{ route('admin.pesan_masuk') }}">Pesan masuk
                    <span class="badge bg-light-danger badge-pill badge-round float-right mt-50">
                        {{ count($pesan) }}
                    </span>
                </a>
            </li>
            <li class="submenu-item ">
                <a href="{{ route('admin.pesan_terkirim') }}">Pesan terkirim</a>
            </li>
        </ul>
    </li>

    <li class="sidebar-title">LANJUTAN</li>

    <li class="sidebar-item {{ request()->is('logout*') ? 'active' : '' }} ">
        <a href="{{ route('logout') }}"
            onclick="event.preventDefault();
document.getElementById('logout-form').submit();" class="sidebar-link">
            <i class="bi bi-box-arrow-in-down-left"></i>
            <span>Keluar</span>
        </a>

        <form id="logout-form" action="{{ route('logout') }}" method="POST" class="d-none">
            @csrf
        </form>
    </li>
</ul>

user

<ul class="menu">
    <li class="sidebar-title">MAIN MENU</li>

    <li class="sidebar-item active ">
        <a href={{ route('user.dashboard') }} class='sidebar-link'>
            <i class="bi bi-grid-fill"></i>
            <span>Dashboard</span>
        </a>
    </li>

    <li class="sidebar-item  has-sub">
        <a href="#" class='sidebar-link'>
            <i class="bi bi-stack"></i>
            <span>Peminjaman Buku</span>
        </a>
        <ul class="submenu ">
            <li class="submenu-item ">
                <a href="{{ Route('user.form_peminjaman') }}">Formulir Peminjaman Buku</a>
            </li>
            <li class="submenu-item ">
                <a href="{{ Route('user.riwayat_peminjaman') }}">Riwayat Peminjaman Buku</a>
            </li>
        </ul>
    </li>

    <li class="sidebar-item  has-sub">
        <a href="#" class='sidebar-link'>
            <i class="bi bi-collection-fill"></i>
            <span>Pengembalian Buku</span>
        </a>
        <ul class="submenu ">
            <li class="submenu-item ">
                <a href="{{ Route('user.form_pengembalian') }}">Formulir Pengembalian Buku</a>
            </li>
            <li class="submenu-item ">
                <a href="{{ Route('user.riwayat_pengembalian') }}">Riwayat Pengembalian Buku</a>
            </li>
        </ul>
    </li>

    <li class="sidebar-title">LAIN LAIN</li>

    <li class="sidebar-item  has-sub">
        <a href="#" class='sidebar-link'>
            <i class="bi bi-collection-fill"></i>
            <span>Pesan</span>
        </a>
        <ul class="submenu ">
            <li class="submenu-item {{ request()->is('pengembalian*') ? 'active' : '' }}">
                <a href={{ route('user.pesan_masuk') }}>Pesan Masuk
                    <span
                        class="badge bg-light-danger badge-pill badge-round float-right mt-50">
                        {{ count($pesan) }}
                    </span>
                </a>
            </li>

            <li class="submenu-item ">
                <a href="{{ Route('user.pesan_terkirim') }}">Pesan Terkirim</a>
            </li>
        </ul>
    </li>

    <li class="sidebar-item  ">
        <a href="{{ Route('user.profile') }}" class='sidebar-link'>
            <i class="bi bi-file-earmark-medical-fill"></i>
            <span>Profil Saya </span>
        </a>
    </li>

    <li class="sidebar-title">LANJUTAN</li>

    <li class="sidebar-item {{ request()->is('logout*') ? 'active' : '' }} ">
        <a href="{{ route('logout') }}"
            onclick="event.preventDefault();
document.getElementById('logout-form').submit();" class="sidebar-link">
            <i class="bi bi-arrow-left-square-fill"></i>
            <span>Keluar</span>
        </a>

        <form id="logout-form" action="{{ route('logout') }}" method="POST" class="d-none">
            @csrf
        </form>
    </li>
</ul>

		BUAT ADMIN	

26. php artisan make:controller Admin\DashboardController --resource

Admin/DashboardController

<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\Buku;
use App\Models\Kategori;
use App\Models\Penerbit;
use App\Models\User;
use Illuminate\Http\Request;

class DashboardController extends Controller
{
    /**
     * Display a listing of the resource.
     *
     * @return \Illuminate\Http\Response
     */
    public function index(){
        $buku = Buku::count();

        $kategori = Kategori::count();

        $user = User::where('role', 'user')->count();

        $penerbit = Penerbit::count();

        return view('admin.dashboard', compact('buku', 'kategori', 'user', 'penerbit'));
    }

    /**
     * Show the form for creating a new resource.
     *
     * @return \Illuminate\Http\Response
     */
    public function create()
    {
        //
    }

    /**
     * Store a newly created resource in storage.
     *
     * @param  \Illuminate\Http\Request  $request
     * @return \Illuminate\Http\Response
     */
    public function store(Request $request)
    {
        //
    }

    /**
     * Display the specified resource.
     *
     * @param  int  $id
     * @return \Illuminate\Http\Response
     */
    public function show($id)
    {
        //
    }

    /**
     * Show the form for editing the specified resource.
     *
     * @param  int  $id
     * @return \Illuminate\Http\Response
     */
    public function edit($id)
    {
        //
    }

    /**
     * Update the specified resource in storage.
     *
     * @param  \Illuminate\Http\Request  $request
     * @param  int  $id
     * @return \Illuminate\Http\Response
     */
    public function update(Request $request, $id)
    {
        //
    }

    /**
     * Remove the specified resource from storage.
     *
     * @param  int  $id
     * @return \Illuminate\Http\Response
     */
    public function destroy($id)
    {
        //
    }
}

27. resource/views/admin/dashboard.blade.php

@extends('layouts.master')
@section('content')
    <div class="row">
        <div class="col-6 col-md-3">
            <div class="card shadow">
                <div class="card-body px-4 py-4-5">
                    <div class="row">
                        <div class="col-md-4 col-lg-12 col-xl-12 col-xxl-5 d-flex justify-content-start ">
                            <div class="stats-icon blue mb-2">
                                <i class="ibi bi-book "></i>
                            </div>
                        </div>
                        <div class="col-md-8 col-lg-12 col-xl-12 col-xxl-7">
                            <h6 class="text-muted font-semibold">Jumlah Buku</h6>
                            <h6 class="font-extrabold mb-0">{{ $buku }} Buku</h6>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-6 col-md-3">
            <div class="card shadow">
                <div class="card-body px-4 py-4-5">
                    <div class="row">
                        <div class="col-md-4 col-lg-12 col-xl-12 col-xxl-5 d-flex justify-content-start ">
                            <div class="stats-icon red mb-2">
                                <i class="ibi bi-files-alt"></i>
                            </div>
                        </div>
                        <div class="col-md-8 col-lg-12 col-xl-12 col-xxl-7">
                            <h6 class="text-muted font-semibold">Jumlah Kategori</h6>
                            <h6 class="font-extrabold mb-0"> {{ $kategori }} Kategori</h6>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-6 col-md-3">
            <div class="card shadow">
                <div class="card-body px-4 py-4-5">
                    <div class="row">
                        <div class="col-md-4 col-lg-12 col-xl-12 col-xxl-5 d-flex justify-content-start ">
                            <div class="stats-icon green mb-2">
                                <i class="ibi bi-person"></i>
                            </div>
                        </div>
                        <div class="col-md-8 col-lg-12 col-xl-12 col-xxl-7">
                            <h6 class="text-muted font-semibold">Jumlah Member</h6>
                            <h6 class="font-extrabold mb-0"> {{ $user }} Member</h6>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-6 col-md-3">
            <div class="card shadow">
                <div class="card-body px-4 py-4-5">
                    <div class="row">
                        <div class="col-md-4 col-lg-12 col-xl-12 col-xxl-5 d-flex justify-content-start ">
                            <div class="stats-icon purple mb-2">
                                <i class="ibi bi-brush"></i>
                            </div>
                        </div>
                        <div class="col-md-8 col-lg-12 col-xl-12 col-xxl-7">
                            <h6 class="text-muted font-semibold">Jumlah Penerbit</h6>
                            <h6 class="font-extrabold mb-0"> {{ $penerbit }} Penerbit</h6>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-12 text-center mt-4">

        @php
            use App\Models\Identitas;
            $identitas = Identitas::first();

        @endphp
        <img src="{{ $identitas->foto ?? '/assets/images/not-found.png' }}" alt="" width="250" height="250"
            class="mb-5">
        <h5 class="mb-4">{{ $identitas->nama_app }}</h5>
        <h5 class="mb-4">{{ $identitas->email_app }}</h5>
        <h5 class="mb-4">{{ $identitas->no_hp }}</h5>
        <h5 class="mb-4">{{ $identitas->alamat_app }}</h5>
    </div>


    @endsection

28. MasterData/Anggota

php artisan make:controller Admin/AnggotaController --resource

<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\User;
use Carbon\Carbon;
use Illuminate\Http\Request;

class AnggotaController extends Controller
{
    /**
     * Display a listing of the resource.
     *
     * @return \Illuminate\Http\Response
     */
    public function index()
    {
        $total = User::where('role', 'user')->count();
        $kode = 'A0' . $total + 1;
        $anggota = User::where('role', 'user')->get();
        return view('admin.masterdata.anggota', compact('anggota', 'kode'));
    }

    public function store(Request $request)
    {
        $kode = User::where('role', 'user')->count();

        $anggota = User::create([
            'kode' => 'A0' . $kode + 1,
            'nis' => $request->nis,
            'fullname' => $request->fullname,
            'username' => $request->username,
            'password' => bcrypt($request->password),
            'kelas' => $request->kelas,
            // 'verif' => 'verified',
            'alamat' => $request->alamat,
            'role' => 'user',
            'join_date' => Carbon::now()
        ]);

        if ($anggota) {
            return redirect()
                ->back()
                ->with("status", "success")
                ->with("message", "Berhasil menambahkan user baru");
        }
        return redirect()->back()
            ->with("status", "danger")
            ->with("message", "Gagal menambahkan user baru");
    }

    public function update(Request $request, $id)
    {
        $anggota = User::where('role', 'user')->where('id', $id);

        $anggota->update([
            'nis' => $request->nis,
            // 'username' => $request->username,
            'fullname' => $request->fullname,
            'kelas' => $request->kelas,
            'alamat' => $request->alamat,
        ]);
        return redirect()->back();
    }

    public function update_status(Request $request, $id){
        $anggota = User::where('id', $id)->first();

        if ($anggota != null) {
            if ($request->verif == 'unverified') {
                $anggota->update([
                   'verif' =>'verified',
                ]);
            }

            if ($request->verif == 'verified') {
                $anggota->update([
                  'verif' =>'unverified',
                ]);
            }

            return redirect()
                ->back()
                ->with("status", "success")
                ->with("message", "Berhasil merubah status");
        }
            return redirect()->back()
                ->with("status", "danger")
                ->with("message", "Gagal merubah status");
    }

    public function delete($id)
    {
        $anggota = User::where('role', 'user')->where('id', $id);
        $anggota->delete();

        return redirect()->back();
    }
}

view di admin/masterdata/anggota.blade.php

@extends('layouts.master')
@section('content')
    @if (session('status'))
        <div class="alert alert-{{ session('status') }}">
            {{ session('message') }}
        </div>
    @endif
    <div class="row">
        <div class="col-9">
            <h4>Data Anggota</h4>
        </div>
    </div>
    <section class="section">
        <div class="card">
            <div class="card-body">
                <button type="button" class="btn shadow btn-primary mb-3" data-bs-toggle="modal"
                    data-bs-target="#exampleModal"><i class="bi bi-plus-lg ms-2"></i>
                    Tambah Anggota
                </button>
                <!-- Modal ADD DATA -->
                <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                    aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Tambah Data Peserta Didik</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                            </div>
                            <form action={{ route('admin.tambah_anggota') }} enctype="multipart/form-data" method="POST">
                                @csrf
                                <div class="modal-body">
                                    <div class="form-group">
                                        <label>Kode Anggota</label>
                                        <input type="text" class="form-control" name="kode"
                                            value="{{ $kode }}" readonly />
                                    </div>

                                    <div class="col-12 mb-4">
                                        <div class="form-group">
                                            <label>NIS</label>
                                            <input type="text" class="form-control" name="nis" placeholder="NIS"
                                                required />
                                        </div>
                                    </div>

                                    <div class="col-12 mb-4">
                                        <div class="form-group">
                                            <label>Username</label>
                                            <input type="text" class="form-control" name="username"
                                                placeholder="Username" required aria-autocomplete="none" />
                                        </div>
                                    </div>

                                    <div class="col-12 mb-4">
                                        <div class="form-group">
                                            <label>Fullname</label>
                                            <input type="text" class="form-control" name="fullname"
                                                placeholder="Fullname" required />
                                        </div>
                                    </div>

                                    <div class="col-12 mb-4">
                                        <div class="form-group">
                                            <label>Password</label>
                                            <input type="password" class="form-control" name="password"
                                                placeholder="Password" required autocomplete="new-password" />
                                        </div>
                                    </div>

                                    <div class="col-12 mb-4">
                                        <div class="form-group">
                                            <label>Kelas</label>
                                            <input type="text" class="form-control" name="kelas" placeholder="Kelas"
                                                required />
                                        </div>
                                    </div>

                                    <div class="col-12 mb-4">
                                        <div class="form-group">
                                            <label>Alamat</label>
                                            <textarea class="form-control" rows="3" name="alamat"></textarea>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                    <button type="submit" class="btn btn-primary">Save changes</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <!-- Modal ADD DATA -->

                {{-- Modal EDIT  --}}
                @foreach ($anggota as $a)
                    <div class="modal fade" id="update-anggota{{ $a->id }}" tabindex="-1"
                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h1 class="modal-title fs-5" id="exampleModalLabel">Ubah Data Anggota</h1>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>
                                <form action="{{ url('/admin/edit/anggota/' . $a->id) }}" method="POST"
                                    enctype="multipart/form-data">
                                    @csrf
                                    @method('put')
                                    <div class="modal-body">

                                        <div class="mb-3">
                                            <label for="formGroupExampleInput" class="form-label">NIS</label>
                                            <input type="text" class="form-control" id="formGroupExampleInput"
                                                placeholder="" name="nis" value="{{ $a->nis }}" required>
                                        </div>

                                        <div class="mb-3">
                                            <label for="formGroupExampleInput" class="form-label">Nama Lengkap</label>
                                            <input type="text" class="form-control" id="formGroupExampleInput"
                                                placeholder="" name="fullname" value="{{ $a->fullname }}" required>
                                        </div>

                                        {{-- <div class="mb-3">
                                            <label for="formGroupExampleInput" class="form-label">username</label>
                                            <input type="text" class="form-control" id="formGroupExampleInput"
                                                placeholder="" name="username" value="{{ $a->username }}" required>
                                        </div> --}}

                                        <div class="mb-3">
                                            <label for="formGroupExampleInput" class="form-label">Kelas</label>
                                            <input type="text" class="form-control" id="formGroupExampleInput"
                                                placeholder="" name="kelas" value="{{ $a->kelas }}" required>
                                        </div>

                                        <div class="mb-3">
                                            <label for="formGroupExampleInput" class="form-label">Alamat</label>
                                            <input type="text" class="form-control" id="formGroupExampleInput"
                                                placeholder="" value="{{ $a->alamat }}" name="alamat" required>
                                        </div>

                                        {{-- <div class="mb-3">
                                            <label for="formGroupExampleInput" class="form-label">status</label>
                                            <select name="verif_id" class="form-select" required>
                                                <option value="" disabled selected>-- pilih opsion</option>
                                                <option value="verified">verified</option>
                                                <option value="unverified">unverified</option>
                                            </select>
                                        </div> --}}

                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary"
                                            data-bs-dismiss="modal">Close</button>
                                        <button type="submit" class="btn btn-primary">Save changes</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                @endforeach
                {{-- Modal EDIT --}}


                {{-- Modal DELETE --}}
                @foreach ($anggota as $a)
                    <div class="modal fade modal-borderless" id="hapus-anggota{{ $a->id }}" tabindex="-1"
                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <form action={{ url('/admin/hapus/anggota/' . $a->id) }} method="POST"
                                    enctype="multipart/form-data">
                                    @csrf
                                    @method('DELETE')
                                    <div class="modal-body">
                                        <center class="mt-3">
                                            <p>
                                                Apakah anda yakin ingin menghapus data ini?
                                            </p>

                                        </center>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary"
                                            data-bs-dismiss="modal">Tidak</button>
                                        <button type="submit" class="btn btn-danger">Hapus!</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                @endforeach
                {{-- Modal Delete --}}

                <table class="table table-striped" id="table1">
                    <thead>
                        <tr>
                            <th>No.</th>
                            <th>Kode</th>
                            <th>Nis</th>
                            <th>Nama Lengkap</th>
                            <th>Kelas</th>
                            <th>Alamat</th>
                            <th>Status</th>
                            <th>Aksi</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach ($anggota as $a)
                            <tr>
                                <td>{{ $loop->iteration }}</td>
                                <td>{{ $a->kode }}</td>
                                <td>{{ $a->nis }}</td>
                                <td>{{ $a->fullname }}</td>
                                <td>{{ $a->kelas }}</td>
                                <td>{{ $a->alamat }}</td>

                                <td class="align-middle">
                                    <form action="{{ route('admin.update_status', $a->id) }}" method="POST"
                                        style="display: inline-block">
                                        @csrf
                                        @method('PUT')
                                        <input type="hidden" value="{{ $a->verif }}" name="verif">
                                        <button type="submit"
                                            class="btn btn-{{ $a->verif == 'verified' ? 'success' : 'danger' }}">
                                            {{ $a->verif }}
                                        </button>
                                    </form>
                                </td>

                                <td>
                                    <button type="button" class="btn btn-success" data-bs-toggle="modal"
                                        data-bs-target="#update-anggota{{ $a->id }}"><i
                                            class="bi bi-pencil-square"></i></button>
                                    <button type="button" class="btn btn-danger" data-bs-toggle="modal"
                                        data-bs-target="#hapus-anggota{{ $a->id }}"><i
                                            class="bi bi-trash"></i></button>
                                </td>
                            </tr>
                        @endforeach
                    </tbody>
                </table>
            </div>
        </div>
    </section>
    </div>
@endsection

29. MasterData/Penerbit

php artisan make:controller Admin/PenerbitController --resource

<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\Penerbit;
use Illuminate\Http\Request;

class PenerbitController extends Controller
{
    /**
     * Display a listing of the resource.
     *
     * @return \Illuminate\Http\Response
     */
    public function index()
    {
        $penerbit = Penerbit::all();
        $total = count($penerbit);
        $kode = 'P0' . $total + 1;
        return view('admin.masterdata.penerbit', compact('penerbit', 'kode'));
    }

    public function store(Request $request)
    {
        $penerbit = Penerbit::all();
        $total = count($penerbit);
        $kode = 'P0'. $total + 1;

        $penerbit = Penerbit::create([
            'kode' => $request->kode,
            'nama' => $request->nama,
            'verif' => $request->verif
        ]);

        if ($penerbit) {
            return redirect()
                ->back()
                ->with("status", "success")
                ->with("message", "Berhasil menambahkan penerbit baru");
        }
        return redirect()->back()
            ->with("status", "danger")
            ->with("message", "Gagal menambah penerbit baru");
    }

    public function update(Request $request, $id)
    {
        $penerbit = Penerbit::findOrFail($id);
        $penerbit->update([
            'nama' => $request->nama,
        ]);
        return redirect()->back();
    }

    public function updateStatus($id, Request $request){
        $penerbit = Penerbit::where('id', $id)->first();

        if ($penerbit != null) {
            if ($request->verif == 'unverified') {
                $penerbit->update([
                    'verif' => 'verified'
                ]);
        }

         if ($request->verif =='verified') {
            $penerbit->update([
               'verif' => 'unverified'
            ]);
        }
        return redirect()
            ->back()
            ->with("status", "success")
            ->with("message", "Berhasil merubah status");
        }
        return redirect()->back()
            ->with("status", "danger")
            ->with("message", "Gagal merubah status");
    }

    public function delete($id)
    {
        $penerbit = Penerbit::findOrFail($id);
        $penerbit->delete();

        return redirect()->back();
    }
}

buat view di admin/master data/penerbit.blade.php

@extends('layouts.master')
@section('content')
    @if (session('status'))
        <div class="alert alert-{{ session('status') }}">
            {{ session('message') }}
        </div>
    @endif
    <div class="row">
        <div class="col-9">
            <h4>Data Penerbit </h4>
        </div>
        {{-- <div class="col-3">
            <a href="{{ Route('user.form_peminjaman') }}" class="btn btn-primary float">Pinjam</a>
        </div> --}}
    </div>
    <section class="section">
        <div class="card">
            <div class="card-body">
                <button type="button" class="btn shadow btn-primary mb-3" data-bs-toggle="modal"
                    data-bs-target="#exampleModal"><i class="bi bi-plus-lg ms-2"></i>
                    Tambah Penerbit
                </button>
                <!-- Modal ADD DATA -->
                <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                    aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Tambah Data Penerbit</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                            </div>
                            <form action="{{ Route('admin.tambah_penerbit') }}" enctype="multipart/form-data"
                                method="POST" autocomplete="off">
                                @csrf
                                <div class="modal-body">
                                    <div class="form-group">
                                        <label>Kode Penerbit</label>
                                        <input type="text" class="form-control" name="kode"
                                            value="{{ $kode }}" readonly />
                                    </div>

                                    <div class="col-12 mb-4">
                                        <div class="form-group">
                                            <label>Nama</label>
                                            <input type="text" class="form-control" name="nama"
                                                placeholder="Nama Penerbit" required />
                                        </div>
                                    </div>

                                    <div class="col-12 mb-4">
                                        <div class="form-group">
                                            <label>Status Penerbit</label>
                                            <select class="form-select" required name="verif">
                                                <option value="" disabled selected>--Pilih Opsi--</option>
                                                <option value="unverified">Unverified</option>
                                                <option value="verified">Verified</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary"
                                        data-bs-dismiss="modal">Close</button>
                                    <button type="submit" class="btn btn-primary">Save changes</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <!-- Modal ADD DATA -->

                {{-- Modal EDIT  --}}
                @foreach ($penerbit as $p)
                    <div class="modal fade" id="update-penerbit{{ $p->id }}" tabindex="-1"
                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">Ubah Data Penerbit</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>
                                <form action="{{ route('admin.update_penerbit', $p->id) }}" method="post">
                                    @csrf
                                    @method('put')
                                    <div class="modal-body">
                                        <div class="mb-3">
                                            <label for="formGroupExampleInput" class="form-label">Nama</label>
                                            <input type="text" class="form-control" id="formGroupExampleInput"
                                                placeholder="" name="nama" value="{{ $p->nama }}" required>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary"
                                            data-bs-dismiss="modal">Close</button>
                                        <button type="submit" class="btn btn-primary">Save changes</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                @endforeach
                {{-- Modal EDIT --}}


                {{-- Modal DELETE --}}
                @foreach ($penerbit as $p)
                    <div class="modal fade modal-borderless" id="hapus-penerbit{{ $p->id }}" tabindex="-1"
                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <form action={{ url('/admin/hapus/penerbit/' . $p->id) }} method="POST"
                                    enctype="multipart/form-data">
                                    @csrf
                                    @method('DELETE')
                                    <div class="modal-body">
                                        <center class="mt-3">
                                            <p>
                                                Apakah anda yakin ingin menghapus data ini?
                                            </p>

                                        </center>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary"
                                            data-bs-dismiss="modal">Tidak</button>
                                        <button type="submit" class="btn btn-danger">Hapus!</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                @endforeach
                {{-- Modal Delete --}}



                <table class="table table-striped" id="table1">
                    <thead>
                        <tr>
                            <th>No.</th>
                            <th>Kode</th>
                            <th>Nama Penerbit</th>
                            <th>Status</th>
                            <th>Aksi</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach ($penerbit as $p)
                            <tr>
                                <td>{{ $loop->iteration }}</td>
                                <td>{{ $p->kode }}</td>
                                <td>{{ $p->nama }}</td>
                                <td class="align-middle">
                                    <form action="{{ route('admin.update_status_penerbit', $p->id) }}" method="POST"
                                        style="display: inline-block">
                                        @csrf
                                        <input type="hidden" value="{{ $p->verif }}" name="verif">
                                        <button type="submit"
                                            class="btn shadow btn-outline-{{ $p->verif == 'verified' ? 'success' : 'danger' }}">
                                            {{ $p->verif }}
                                        </button>
                                    </form>
                                </td>

                                <td>
                                    <button type="button" class="btn btn-success" data-bs-toggle="modal"
                                        data-bs-target="#update-penerbit{{ $p->id }}"><i
                                            class="bi bi-pencil-square"></i></button>
                                    <button type="button" class="btn btn-danger" data-bs-toggle="modal"
                                        data-bs-target="#hapus-penerbit{{ $p->id }}"><i
                                            class="bi bi-trash"></i></button>
                                </td>
                            </tr>
                        @endforeach
                    </tbody>
                </table>
            </div>
        </div>
    </section>
    </div>
@endsection

30. MasterData/Administrator

php artisan make:controller Admin/AdministratorController --resource

<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\User;
use Carbon\Carbon;
use Illuminate\Http\Request;

class AdministratorController extends Controller
{
    
    public function index()
    {
        $admin = User::where('role', 'admin')->get();
        return view('admin.masterdata.administrator', compact('admin'));
    }

    public function store(Request $request)
    {
        $admin = User::create([
            'kode' => '',
            'fullname' => $request->fullname,
            'username' => $request->username,
            'password' => bcrypt($request->password),
            'role' => 'admin',
            'verif' => 'verified',
            'join_date' => Carbon::now(),
        ]);

        if ($admin) {
            return redirect()
                ->back()
                ->with("status", "success")
                ->with("message", "Berhasil menambah admin");
        }
        return redirect()
            ->back()
            ->with("status", "danger")
            ->with("message", "Gagal menambah admin");
    }

    public function update(Request $request, $id)
    {
        $admin = User::where('role', 'admin')->where('id', $id);
        $admin->update([
            'fullname' => $request->fullname,
            'username' => $request->username,
        ]);
        return redirect()->back();
    }

    public function delete($id)
    {
        $admin = User::findOrFail($id);
        $admin->delete();

        return redirect()->back();
    }
}

views/admin/masterdata/administraror.blade.php

@extends('layouts.master')
@section('content')
    @if (session('status'))
        <div class="alert alert-{{ session('status') }}">
            {{ session('message') }}
        </div>
    @endif
    <div class="row">
        <div class="col-9">
            <h4>Data Administrartor</h4>
        </div>
    </div>
    <section class="section">
        <div class="card">
            <div class="card-body">
                <button type="button" class="btn shadow btn-primary mb-3" data-bs-toggle="modal"
                    data-bs-target="#exampleModal"><i class="bi bi-plus-lg ms-2"></i>
                    Tambah Administrator
                </button>
                <!-- Modal ADD DATA -->
                <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Tambah Data Admin</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"
                                aria-label="Close"></button>
                        </div>
                        <form action={{ route('admin.tambah_admin') }} enctype="multipart/form-data" method="POST">
                            @csrf
                            <div class="modal-body">
                                <div class="col-12 mb-3">
                                    <div class="form-group">
                                        <label>Nama Lengkap</label>
                                        <input type="text" class="form-control" name="fullname"
                                            placeholder="Nama Lengkap" />
                                    </div>
                                </div>

                                <div class="col-12 mb-4">
                                    <div class="form-group">
                                        <label>Nama Pengguna</label>
                                        <input type="text" class="form-control" name="username"
                                            placeholder="Nama Pengguna" required />
                                    </div>
                                </div>

                                <div class="col-12 mb-4">
                                    <div class="form-group">
                                        <label>Password</label>
                                        <input type="password" class="form-control" name="password" placeholder="Password"
                                            required autocomplete="new-password" />
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                <button type="submit" class="btn btn-primary">Save changes</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
                <!-- Modal ADD DATA -->

                {{-- Modal EDIT  --}}
            @foreach ($admin as $a)
            <div class="modal fade" id="update-anggota{{ $a->id }}" tabindex="-1"
                aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="exampleModalLabel">Ubah Data Admin</h1>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"
                                aria-label="Close"></button>
                        </div>
                        <form action="{{ url('/admin/edit/admin/' . $a->id) }}" method="POST"
                            enctype="multipart/form-data">
                            @csrf
                            @method('put')
                            <div class="modal-body">

                                <div class="mb-3">
                                    <label for="formGroupExampleInput" class="form-label">Nama Lengkap</label>
                                    <input type="text" class="form-control" id="formGroupExampleInput"
                                        placeholder="" name="fullname" value="{{ $a->fullname }}" required>
                                </div>

                                <div class="mb-3">
                                    <label for="formGroupExampleInput" class="form-label">Nama Pengguna</label>
                                    <input type="text" class="form-control" id="formGroupExampleInput"
                                        placeholder="" name="username" value="{{ $a->username }}" required>
                                </div>

                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary"
                                    data-bs-dismiss="modal">Close</button>
                                <button type="submit" class="btn btn-primary">Save changes</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        @endforeach
        {{-- Modal EDIT --}}


                {{-- Modal DELETE --}}
                @foreach ($admin as $a)
                <div class="modal fade modal-borderless" id="hapus-anggota{{ $a->id }}" tabindex="-1"
                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <form action={{ url('/admin/hapus/admin/' . $a->id) }} method="POST"
                                enctype="multipart/form-data">
                                @csrf
                                @method('DELETE')
                                <div class="modal-body">
                                    <center class="mt-3">
                                        <p>
                                            Apakah anda yakin ingin menghapus data ini?
                                        </p>

                                    </center>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary"
                                        data-bs-dismiss="modal">Tidak</button>
                                    <button type="submit" class="btn btn-danger">Hapus!</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            @endforeach
                {{-- Modal Delete --}}

                <table class="table table-striped" id="table1">
                    <thead>
                        <tr>
                            <th>No.</th>
                            <th>Nama Lengkap</th>
                            <th>Nama Pengguna</th>
                            <th>Password</th>
                            <th>Terakhir Login</th>
                            <th>Aksi</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach ($admin as $a)
                            <tr>
                                <td>{{ $loop->iteration }}</td>
                                <td>{{ $a->fullname }}</td>
                                <td>{{ $a->username }}</td>
                                <td>{{ $a->password }}</td>
                                <td>{{ $a->terakhir_login }}</td>
                                <td>
                                    <button type="button" class="btn btn-success" data-bs-toggle="modal"
                                        data-bs-target="#update-anggota{{ $a->id }}"><i
                                            class="bi bi-pencil-square"></i></button>
                                    <button type="button" class="btn btn-danger" data-bs-toggle="modal"
                                        data-bs-target="#hapus-anggota{{ $a->id }}"><i
                                            class="bi bi-trash"></i></button>
                                </td>
                            </tr>
                        @endforeach
                    </tbody>
                </table>
            </div>
        </div>
    </section>
    </div>
@endsection

31. MasterData/Peminjaman 

php artisan make:controller Admin/PeminjamanController --resource

<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\Peminjaman;
use Illuminate\Http\Request;

class PeminjamanController extends Controller
{

    public function index()
    {
        $peminjaman = Peminjaman::all();
        return view('admin.masterdata.peminjaman', compact('peminjaman'));
    }
}

buat view di master data/peminjaman.blade.php

@extends('layouts.master')
@section('content')
    @if (session('status'))
        <div class="alert alert-{{ session('status') }}">
            {{ session('message') }}
        </div>
    @endif
    <div class="row">
        <div class="col-9">
            <h4>Data Peminjaman Buku</h4>
        </div>
    </div>
    <section class="section">
        <div class="card">
            <div class="card-body">
                <table class="table table-striped" id="table1">
                    <thead>
                        <tr>
                            <th>No.</th>
                            <th>Nama</th>
                            <th>Judul</th>
                            <th>Tanggal Peminjaman</th>
                            <th>Tanggal Pengembalian</th>
                            <th>Kondisi Dipinjam</th>
                            <th>Kondisi Dikembalikan</th>
                            <th>Denda</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach ($peminjaman as $p)
                            <tr>
                                <td>{{ $loop->iteration }}</td>
                                <td>{{ $p->user->username }}</td>
                                <td>{{ $p->buku->judul }}</td>
                                <td>{{ $p->tanggal_peminjaman }}</td>
                                <td>{{ $p->tanggal_pengembalian }}</td>
                                <td>{{ $p->kondisi_buku_saat_dipinjam }}</td>
                                <td>{{ $p->kondisi_buku_saat_dikembalikan }}</td>
                                <td>{{ $p->denda }}</td>
                            </tr>
                        @endforeach
                    </tbody>
                </table>
            </div>
        </div>
    </section>
    </div>
@endsection

32. Katalog/DataBuku

php artisan make:controller Admin/BukuController --resource

<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\Buku;
use App\Models\Kategori;
use App\Models\Penerbit;
use Illuminate\Http\Request;

class BukuController extends Controller
{

    public function index()
    {
        $kategori = Kategori::all();
        $buku = Buku::all();
        $penerbit = Penerbit::all();
        return view('admin.katalog.buku', compact('kategori', 'buku', 'penerbit'));
    }

    public function store(Request $request)
    {
        // $buku = Buku::all();
        // $buku = Buku::create($request->all());

        // return redirect()->back();

        if ($request->foto != null) {
            $imageName = time() . '.' . $request->foto->extension();

            $request->foto->move(public_path('img'), $imageName);
            $buku = Buku::create([
                'judul' => $request->judul,
                'kategori_id' => $request->kategori_id,
                'penerbit_id' => $request->penerbit_id,
                'pengarang' => $request->pengarang,
                'tahun_terbit' => $request->tahun_terbit,
                'isbn' => $request->isbn,
                'j_buku_baik' => $request->j_buku_baik,
                "j_buku_rusak" => $request->j_buku_rusak,
                "foto" => "/img/" . $imageName
            ]);
        } else {
            $buku = Buku::create([
                'judul' => $request->judul,
                'kategori_id' => $request->kategori_id,
                'penerbit_id' => $request->penerbit_id,
                'pengarang' => $request->pengarang,
                'tahun_terbit' => $request->tahun_terbit,
                'isbn' => $request->isbn ?? "",
                'j_buku_baik' => $request->j_buku_baik,
                "j_buku_rusak" => $request->j_buku_rusak,
                // 'foto' => ""
            ]);
        }
        return redirect()->back();
    }

    public function update(Request $request, $id)
    {
        $buku = Buku::find($id);

        if ($buku != null) {
            if ($request->foto != null) {

                $imageName = time(). '.'. $request->foto->extension();

                $request->foto->move(public_path('img'), $imageName);

                $buku->update([
                    'judul' => $request->judul,
                    'kategori_id' => $request->kategori_id,
                    'penerbit_id' => $request->penerbit_id,
                    'pengarang' => $request->pengarang,
                    'tahun_terbit' => $request->tahun_terbit,
                    'isbn' => $request->isbn,
                    'j_buku_baik' => $request->j_buku_baik,
                    "j_buku_rusak" => $request->j_buku_rusak,
                    "foto" => "/img/". $imageName
                ]);
            } else {
                $buku->update([
                    'judul' => $request->judul,
                    'kategori_id' => $request->kategori_id,
                    'penerbit_id' => $request->penerbit_id,
                    'pengarang' => $request->pengarang,
                    'tahun_terbit' => $request->tahun_terbit,
                    'isbn' => $request->isbn,
                    'j_buku_baik' => $request->j_buku_baik,
                    "j_buku_rusak" => $request->j_buku_rusak,
                    "foto" => $request->foto ?? ""
                ]);
            }
        }
            return redirect()->back();
    }

    public function delete($id)
    {
        $buku = Buku::find($id);
        $buku->delete();
        return redirect()->back();
    }
}

buat view di katalog/buku.blade.php

@extends('layouts.master')
@section('content')
    @if (session('status'))
        <div class="alert alert-{{ session('status') }}">
            {{ session('message') }}
        </div>
    @endif
    <div class="row">
        <div class="col-9">
            <h4>Data Buku</h4>
        </div>
    </div>
    <section class="section">
        <div class="card">
            <div class="card-body">
                <button type="button" class="btn shadow btn-primary mb-3" data-bs-toggle="modal"
                    data-bs-target="#exampleModal"><i class="bi bi-plus-lg ms-2"></i>
                    Tambah Buku
                </button>
                <!-- Modal ADD DATA -->
                <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                    aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Tambah Buku</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                            </div>
                            <form action="{{ Route('admin.tambah_buku') }}" enctype="multipart/form-data" method="POST"
                                autocomplete="off">
                                @csrf
                                <div class="modal-body">
                                    <div class="mb-3">
                                        <label for="formGroupExampleInput" class="form-label">Judul Buku</label>
                                        <input type="text" class="form-control" id="formGroupExampleInput" placeholder=""
                                            name="judul" required>
                                    </div>

                                    <div class="mb-3">
                                        <label for="formGroupExampleInput" class="form-label">Kategori</label>
                                        <select name="kategori_id" id="" class="form-select">

                                            <option>Pilih Opsi</option>

                                            @foreach ($kategori as $k)
                                                <option value="{{ $k->id }}">{{ $k->nama }}</option>
                                            @endforeach
                                        </select>
                                    </div>

                                    <div class="mb-3">
                                        <label for="formGroupExampleInput" class="form-label">Penerbit</label>
                                        <select name="penerbit_id" id="" class="form-select">

                                            <option>Pilih Opsi</option>

                                            @foreach ($penerbit as $p)
                                                <option value="{{ $p->id }}">{{ $p->nama }}</option>
                                            @endforeach
                                        </select>
                                    </div>

                                    <div class="mb-3">
                                        <label for="formGroupExampleInput" class="form-label">Pengarang</label>
                                        <input type="text" class="form-control" id="formGroupExampleInput" placeholder=""
                                            name="pengarang" required>
                                    </div>

                                    <div class="mb-3">
                                        <label for="formGroupExampleInput" class="form-label">Tahun Terbit</label>
                                        <input type="number" class="form-control" id="formGroupExampleInput" placeholder=""
                                            name="tahun_terbit" required>
                                    </div>

                                    <div class="mb-3">
                                        <label for="formGroupExampleInput" class="form-label">ISBN</label>
                                        <input type="number" class="form-control" id="formGroupExampleInput" placeholder=""
                                            name="isbn" required>
                                    </div>

                                    <div class="mb-3">
                                        <label for="formGroupExampleInput" class="form-label">Jumlah Buku Baik</label>
                                        <input type="number" class="form-control" id="formGroupExampleInput" placeholder=""
                                            name="j_buku_baik" required>
                                    </div>

                                    <div class="mb-3">
                                        <label for="formGroupExampleInput" class="form-label">Jumlah Buku Rusak</label>
                                        <input type="number" class="form-control" id="formGroupExampleInput" placeholder=""
                                            name="j_buku_rusak" required>
                                    </div>

                                    <div class="col-12 mb-4">
                                        <div class="form-group">
                                            <label>Upload Gambar Buku</label>
                                            <input type="file" class="form-control" name="foto"
                                                placeholder="Gambar" />
                                        </div>
                                    </div>

                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary"
                                        data-bs-dismiss="modal">Close</button>
                                    <button type="submit" class="btn btn-primary">Save changes</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <!-- Modal ADD DATA -->

                {{-- Modal EDIT  --}}
                @foreach ($buku as $b)
                    <div class="modal fade" id="update-buku{{ $b->id }}" tabindex="-1"
                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">Ubah Data Buku</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>
                                <form action="{{ route('admin.update.buku', $b->id) }}" enctype="multipart/form-data"
                                    method="post">
                                    @csrf
                                    @method('put')
                                    <div class="modal-body">
                                        <div class="mb-3">
                                            <label for="formGroupExampleInput" class="form-label">Judul Buku</label>
                                            <input type="text" class="form-control" id="formGroupExampleInput"
                                                placeholder="" name="judul" value="{{ $b->judul }}" required>
                                        </div>

                                        <div class="mb-3">
                                            <label for="formGroupExampleInput" class="form-label">Kategori</label>
                                            <select name="kategori_id" id="" class="form-select">

                                                @foreach ($kategori as $k)
                                                    <option value="{{ $k->id }}" {{ $k->id === $b->kategori_id ? 'selected' : '' }}>{{ $k->nama }}</option>
                                                @endforeach

                                            </select>
                                        </div>

                                        <div class="mb-3">
                                            <label for="formGroupExampleInput" class="form-label">Penerbit</label>
                                            <select name="penerbit_id" id="" class="form-select">

                                                @foreach ($penerbit as $k)
                                                    <option value="{{ $k->id }}">{{ $k->nama }}</option>
                                                @endforeach

                                            </select>
                                        </div>

                                        <div class="mb-3">
                                            <label for="formGroupExampleInput" class="form-label">Pengarang</label>
                                            <input type="text" class="form-control" id="formGroupExampleInput"
                                                placeholder="" name="pengarang" value="{{ $b->pengarang }}" required>
                                        </div>

                                        <div class="mb-3">
                                            <label for="formGroupExampleInput" class="form-label">Tahun Terbit</label>
                                            <input type="number" class="form-control" id="formGroupExampleInput"
                                                placeholder="" name="tahun_terbit" value="{{ $b->tahun_terbit }}"
                                                required>
                                        </div>

                                        <div class="mb-3">
                                            <label for="formGroupExampleInput" class="form-label">ISBN</label>
                                            <input type="number" class="form-control" id="formGroupExampleInput"
                                                placeholder="" name="isbn" value="{{ $b->isbn }}" required>
                                        </div>

                                        <div class="mb-3">
                                            <label for="formGroupExampleInput" class="form-label">Jumlah Buku Baik</label>
                                            <input type="number" class="form-control" id="formGroupExampleInput"
                                                placeholder="" name="j_buku_baik" value="{{ $b->j_buku_baik }}"
                                                required>
                                        </div>

                                        <div class="mb-3">
                                            <label for="formGroupExampleInput" class="form-label">Jumlah Buku Rusak</label>
                                            <input type="number" class="form-control" id="formGroupExampleInput"
                                                placeholder="" name="j_buku_rusak" value="{{ $b->j_buku_rusak }}"
                                                required>
                                        </div>

                                        <div class="col-12 mb-4">
                                            <div class="form-group">
                                                <label>Upload Gambar Buku</label>
                                                <input type="file" class="form-control" name="foto"
                                                    placeholder="Gambar" />
                                            </div>
                                        </div>

                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary"
                                            data-bs-dismiss="modal">Close</button>
                                        <button type="submit" class="btn btn-primary">Save changes</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                @endforeach
                {{-- Modal EDIT --}}


                {{-- Modal DELETE --}}
                @foreach ($buku as $p)
                    <div class="modal fade modal-borderless" id="hapus-penerbit{{ $p->id }}" tabindex="-1"
                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <form action={{ url('/admin/hapus/buku/' . $p->id) }} method="POST"
                                    enctype="multipart/form-data">
                                    @csrf
                                    @method('DELETE')
                                    <div class="modal-body">
                                        <center class="mt-3">
                                            <p>
                                                Apakah anda yakin ingin menghapus data ini?
                                            </p>

                                        </center>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary"
                                            data-bs-dismiss="modal">Tidak</button>
                                        <button type="submit" class="btn btn-danger">Hapus!</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                @endforeach
                {{-- Modal Delete --}}

                <table class="table table-striped" id="table1">
                    <thead>
                        <tr>
                            <th>No.</th>
                            <th>Foto</th>
                            <th>Judul</th>
                            <th>Kategori</th>
                            <th>Penerbit</th>
                            <th>Pengarang</th>
                            <th>Tahun Terbit</th>
                            <th>ISBN</th>
                            <th>Jumlah Buku Baik</th>
                            <th>Jumlah Buku Rusak</th>
                            <th>Aksi</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach ($buku as $b)
                            <tr>
                                <td>{{ $loop->iteration }}</td>
                                <td class="align-middle">
                                    <img src="{{ $b->foto ?? '/assets/images/not-found.png' }}" alt=""
                                        width="100" height="100">
                                </td>
                                <td>{{ $b->judul }}</td>
                                <td>{{ $b->kategori->nama }}</td>
                                <td>{{ $b->penerbit->nama }}</td>
                                <td>{{ $b->pengarang }}</td>
                                <td>{{ $b->tahun_terbit }}</td>
                                <td>{{ $b->isbn }}</td>
                                <td>{{ $b->j_buku_baik }}</td>
                                <td>{{ $b->j_buku_rusak }}</td>
                                <td>
                                    <button type="button" class="btn btn-success" data-bs-toggle="modal"
                                        data-bs-target="#update-buku{{ $b->id }}"><i
                                            class="bi bi-pencil-square"></i></button>
                                    <button type="button" class="btn btn-danger" data-bs-toggle="modal"
                                        data-bs-target="#hapus-penerbit{{ $b->id }}"><i
                                            class="bi bi-trash"></i></button>
                                </td>
                            </tr>
                        @endforeach
                    </tbody>
                </table>
            </div>
        </div>
    </section>
    </div>
@endsection

33. Katalog/Kategori

php artisan make:controller Admin/KategoriController --resource

<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\Kategori;
use Illuminate\Http\Request;

class KategoriController extends Controller
{

    public function index()
    {
        $kategori = Kategori::all();
        return view('admin.katalog.kategori', compact('kategori'));
    }

    public function store(Request $request)
    {
        $kategori = Kategori::create([
            'kode' => lcfirst($request->nama),
            'nama' => ucfirst($request->nama)
        ]);

        if ($kategori) {
            return redirect()
                ->back()
                ->with("status", "success")
                ->with("message", "Berhasil menambahkan kategori baru");
        }
        return redirect()
            ->back()
            ->with("status", "danger")
            ->with("message", "Gagal menambahkan kategori baru");
    }

    public function update(Request $request, $id)
    {
        $kategori = Kategori::findOrFail($id);
        $kategori->update([
            'kode' => $request->kode,
            'nama' => $request->nama
        ]);
        return redirect()->back();
    }

    public function delete($id)
    {
        $kategori = Kategori::findOrFail($id);
        $kategori->delete();

        return redirect()->back();
    }
}

buat view di katalog/kategori

@extends('layouts.master')
@section('content')
    @if (session('status'))
        <div class="alert alert-{{ session('status') }}">
            {{ session('message') }}
        </div>
    @endif
    <div class="row">
        <div class="col-9">
            <h4>Data Kategori</h4>
        </div>
    </div>
    <section class="section">
        <div class="card">
            <div class="card-body">
                <button type="button" class="btn shadow btn-primary mb-3" data-bs-toggle="modal"
                    data-bs-target="#exampleModal"><i class="bi bi-plus-lg ms-2"></i>
                    Tambah Kategori
                </button>
                <!-- Modal ADD DATA -->
                <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                    aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Tambah Data Kategori</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                            </div>
                            <form action="{{ Route('admin.tambah_kategori') }}" enctype="multipart/form-data"
                                method="POST" autocomplete="off">
                                @csrf
                                <div class="modal-body">
                                    <div class="col-12 mb-4">
                                        <div class="form-group">
                                            <label>Nama</label>
                                            <input type="text" class="form-control" name="nama"
                                                placeholder="Nama Kategori" required />
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary"
                                        data-bs-dismiss="modal">Close</button>
                                    <button type="submit" class="btn btn-primary">Save changes</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <!-- Modal ADD DATA -->

                {{-- Modal EDIT  --}}
                @foreach ($kategori as $k)
                    <div class="modal fade" id="update-penerbit{{ $k->id }}" tabindex="-1"
                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">Ubah Data Kategori</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>
                                <form action="{{ route('admin.update_kategori', $k->id) }}" method="post">
                                    @csrf
                                    @method('put')
                                    <div class="modal-body">
                                        <div class="mb-3">
                                            <label for="formGroupExampleInput" class="form-label">Kode</label>
                                            <input type="text" class="form-control" id="formGroupExampleInput"
                                                placeholder="" name="kode" value="{{ $k->kode }}" required>
                                        </div>
                                    </div>
                                    <div class="modal-body">
                                        <div class="mb-3">
                                            <label for="formGroupExampleInput" class="form-label">Nama</label>
                                            <input type="text" class="form-control" id="formGroupExampleInput"
                                                placeholder="" name="nama" value="{{ $k->nama }}" required>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary"
                                            data-bs-dismiss="modal">Close</button>
                                        <button type="submit" class="btn btn-primary">Save changes</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                @endforeach
                {{-- Modal EDIT --}}


                {{-- Modal DELETE --}}
                @foreach ($kategori as $p)
                    <div class="modal fade modal-borderless" id="hapus-penerbit{{ $p->id }}" tabindex="-1"
                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <form action={{ url('/admin/hapus/kategori/' . $p->id) }} method="POST"
                                    enctype="multipart/form-data">
                                    @csrf
                                    @method('DELETE')
                                    <div class="modal-body">
                                        <center class="mt-3">
                                            <p>
                                                apakah anda yakin ingin menghapus data ini?
                                            </p>

                                        </center>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary"
                                            data-bs-dismiss="modal">Tidak</button>
                                        <button type="submit" class="btn btn-danger">Hapus!</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                @endforeach
                {{-- Modal Delete --}}

                <table class="table table-striped" id="table1">
                    <thead>
                        <tr>
                            <th>No.</th>
                            <th>Kode</th>
                            <th>Nama Kategori</th>
                            <th>Aksi</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach ($kategori as $k)
                            <tr>
                                <td>{{ $loop->iteration }}</td>
                                <td>{{ $k->kode }}</td>
                                <td>{{ $k->nama }}</td>
                                <td>
                                    <button type="button" class="btn btn-success" data-bs-toggle="modal"
                                        data-bs-target="#update-penerbit{{ $k->id }}"><i
                                            class="bi bi-pencil-square"></i></button>
                                    <button type="button" class="btn btn-danger" data-bs-toggle="modal"
                                        data-bs-target="#hapus-penerbit{{ $k->id }}"><i
                                            class="bi bi-trash"></i></button>
                                </td>
                            </tr>
                        @endforeach
                    </tbody>
                </table>
            </div>
        </div>
    </section>
    </div>
@endsection

34. Laporan

		Excel

composer require maatwebsite/excel

config/app.php

'providers' => [
    ...
    Maatwebsite\Excel\ExcelServiceProvider::class,
]

'aliases' => [
    ...
    'Excel' => Maatwebsite\Excel\Facades\Excel::class,
]

php artisan vendor:publish --provider="Maatwebsite\Excel\ExcelServiceProvider"

KALO MERAH CLOSE AJA NO PROBLEM

php artisan make:export LaporanExport

app/exports

<?php

namespace App\Exports;

use App\Models\Identitas;
use App\Models\Peminjaman;
use Illuminate\Contracts\View\View;
use Maatwebsite\Excel\Concerns\FromCollection;
use Maatwebsite\Excel\Concerns\FromView;
use Maatwebsite\Excel\Concerns\ShouldAutoSize;
use Maatwebsite\Excel\Concerns\WithEvents;
use Maatwebsite\Excel\Events\AfterSheet;
use Maatwebsite\Excel\Events\BeforeSheet;

class LaporanExport implements FromView, ShouldAutoSize, WithEvents
{
    /**
    * @return \Illuminate\Support\Collection
    */

    private $request;
    public function __construct($request)
    {
        $this->request = $request;
    }
    public function view(): View
    {
        $peminjamans = Peminjaman::where('tanggal_peminjaman', $this->request)->get();
        $identitas = Identitas::first();
        return view('admin.excel.peminjaman', compact('peminjamans', 'identitas'));
    }

    public function registerEvents(): array{
        return [
            BeforeSheet::class => function(BeforeSheet $event) {
                //Kop Surat
                $event->sheet->getDelegate()->mergeCells('A1:F1');
                $event->sheet->getDelegate()->mergeCells('A2:F2');
                $event->sheet->getDelegate()->mergeCells('A3:F3');
                $event->sheet->getDelegate()->mergeCells('A4:F4');
                // tengah
                $event->sheet->getDelegate()
                    ->getStyle('A1:A4')
                    ->getAlignment()
                    ->setVertical(\PhpOffice\PhpSpreadsheet\Style\Alignment::VERTICAL_CENTER)
                    ->setHorizontal(\PhpOffice\PhpSpreadsheet\Style\Alignment::HORIZONTAL_CENTER);
            },

            AfterSheet::class => function(AfterSheet $event) {
                //jarak
                $event->sheet->getDelegate()->getRowDimension('5')->setRowHeight(25);
                //warna belakang
                $event->sheet->getDelegate()->getStyle('A5:F5')
                    ->getFill()
                    ->setFillType(\PhpOffice\PhpSpreadsheet\Style\Fill::FILL_SOLID)
                    ->getStartColor()
                    ->setARGB('435EBE');
                //font
                $event->sheet->getDelegate()->getStyle('A5:F5')
                    ->getFont()
                    ->getColor()
                    ->setARGB('FFFFFF');

                //jarak
                $event->sheet->getDelegate()
                    ->getStyle('A5:F5')
                    ->getAlignment()
                    ->setVertical(\PhpOffice\PhpSpreadsheet\Style\Alignment::VERTICAL_CENTER)
                    ->setHorizontal(\PhpOffice\PhpSpreadsheet\Style\Alignment::HORIZONTAL_CENTER);
            }
        ];
    }
}

php artisan make:export PengembalianExport

<?php

namespace App\Exports;

use App\Models\Identitas;
use App\Models\Peminjaman;
use Illuminate\Contracts\View\View;
use Maatwebsite\Excel\Concerns\FromCollection;
use Maatwebsite\Excel\Concerns\FromView;
use Maatwebsite\Excel\Concerns\ShouldAutoSize;
use Maatwebsite\Excel\Concerns\WithEvents;
use Maatwebsite\Excel\Events\AfterSheet;
use Maatwebsite\Excel\Events\BeforeSheet;

class PengembalianExport implements FromView, ShouldAutoSize, WithEvents
{
    private $request;
    public function __construct($request)
    {
        $this->request = $request;
    }

    public function view(): View
    {
        $pengembalian = Peminjaman::where('tanggal_pengembalian', $this->request)->get();
        $identitas = Identitas::first();
        return view('admin.excel.pengembalian', compact('pengembalian', 'identitas'));
    }

    public function registerEvents(): array
    {
        return [
            BeforeSheet::class => function (BeforeSheet $event) {
                $event->sheet->getDelegate()->mergeCells('A1:H1');
                $event->sheet->getDelegate()->mergeCells('A2:H2');
                $event->sheet->getDelegate()->mergeCells('A3:H3');
                $event->sheet->getDelegate()->mergeCells('A4:H4');

                //jarak
                $event->sheet->getDelegate()
                    ->getStyle('A1:A4')
                    ->getAlignment()
                    ->setVertical(\PhpOffice\PhpSpreadsheet\Style\Alignment::VERTICAL_CENTER)
                    ->setHorizontal(\PhpOffice\PhpSpreadsheet\Style\Alignment::HORIZONTAL_CENTER);
            },

            AfterSheet::class => function (AfterSheet $event) {
                //jarak
                $event->sheet->getDelegate()->getRowDimension('5')->setRowHeight(25);

                //warna belakang
                $event->sheet->getDelegate()->getStyle('A5:H5')
                    ->getFill()
                    ->setFillType(\PhpOffice\PhpSpreadsheet\Style\Fill::FILL_SOLID)
                    ->getStartColor()
                    ->setARGB('435EBE');

                //font
                $event->sheet->getDelegate()->getStyle('A5:H5')
                    ->getFont()
                    ->getColor()
                    ->setARGB('FFFFFF');

                //jarak
                $event->sheet->getDelegate()
                ->getStyle('A5:H5')
                ->getAlignment()
                ->setVertical(\PhpOffice\PhpSpreadsheet\Style\Alignment::VERTICAL_CENTER)
                ->setHorizontal(\PhpOffice\PhpSpreadsheet\Style\Alignment::HORIZONTAL_CENTER);
            }
        ];
    }
}

php artisan make:export UserExport

<?php

namespace App\Exports;

use App\Models\Identitas;
use App\Models\Peminjaman;
use Illuminate\Contracts\View\View;
use Maatwebsite\Excel\Concerns\FromCollection;
use Maatwebsite\Excel\Concerns\FromView;
use Maatwebsite\Excel\Concerns\ShouldAutoSize;
use Maatwebsite\Excel\Concerns\WithEvents;
use Maatwebsite\Excel\Events\AfterSheet;
use Maatwebsite\Excel\Events\BeforeSheet;

class UserExport implements FromView, ShouldAutoSize, WithEvents
{
    private $request;
    public function __construct($request)
    {
        $this->request = $request;
    }
    public function view(): View
    {
        $user = Peminjaman::where('user_id', $this->request)->get();
        $identitas = Identitas::first();
        return view('admin.excel.user', compact('user', 'identitas'));
    }

    public function registerEvents(): array
    {
        return [
            BeforeSheet::class => function (BeforeSheet $event) {
                $event->sheet->getDelegate()->mergeCells('A1:H1');
                $event->sheet->getDelegate()->mergeCells('A2:H2');
                $event->sheet->getDelegate()->mergeCells('A3:H3');
                $event->sheet->getDelegate()->mergeCells('A4:H4');

                //kasih jarak
                $event->sheet->getDelegate()
                    ->getStyle('A1:A4')
                    ->getAlignment()
                    ->setVertical(\PhpOffice\PhpSpreadsheet\Style\Alignment::VERTICAL_CENTER)
                    ->setHorizontal(\PhpOffice\PhpSpreadsheet\Style\Alignment::HORIZONTAL_CENTER);
            },

            AfterSheet::class => function (AfterSheet $event) {
                //ngasih padding/jarak
                $event->sheet->getDelegate()->getRowDimension('5')->setRowHeight(25);

                //ngasih warna belakang
                $event->sheet->getDelegate()->getStyle('A5:H5')
                    ->getFill()
                    ->setFillType(\PhpOffice\PhpSpreadsheet\Style\Fill::FILL_SOLID)
                    ->getStartColor()
                    ->setARGB('435EBE');

                //ngasih warna font putih
                $event->sheet->getDelegate()->getStyle('A5:H5')
                    ->getFont()
                    ->getColor()
                    ->setARGB('FFFFFF');

                //ngasih jarak
                $event->sheet->getDelegate()
                    ->getStyle('A5:H5')
                    ->getAlignment()
                    ->setVertical(\PhpOffice\PhpSpreadsheet\Style\Alignment::VERTICAL_CENTER)
                    ->setHorizontal(\PhpOffice\PhpSpreadsheet\Style\Alignment::HORIZONTAL_CENTER);
            }
        ];
    }
}

views/admin/excel

peminjaman.blade.php

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Laporan Peminjaman Perpus</title>
</head>

<body>
    <center>
        <h1>Laporan Peminjaman Perpus</h1>
        <h4>{{ $identitas->alamat_app }}</h4>
        <h4>{{ $identitas->email_app }} | {{ $identitas->nomor_hp }}</h4>
        <br>
    </center>
    <table>
        <thead>
            <tr>
                <th  style="border: 1px solid black">No.</th>
                <th  style="border: 1px solid black">Nama</th>
                <th  style="border: 1px solid black">Judul Buku</th>
                <th  style="border: 1px solid black">Tanggal Peminjaman</th>
                <th  style="border: 1px solid black">Tanggal Pengembalian</th>
                <th  style="border: 1px solid black">Kondisi Buku</th>
            </tr>
        </thead>
        <tbody>
            @foreach ($peminjamans as $key => $peminjaman)
                <tr>
                    <td  style="border: 1px solid black">{{ $key + 1 }}</td>
                    <td  style="border: 1px solid black">{{ $peminjaman->user->fullname }}</td>
                    <td  style="border: 1px solid black">{{ $peminjaman->buku->judul }}</td>
                    <td  style="border: 1px solid black">{{ $peminjaman->tanggal_peminjaman }}</td>
                    <td  style="border: 1px solid black">{{ $peminjaman->tanggal_pengembalian }}</td>
                    <td  style="border: 1px solid black">{{ $peminjaman->kondisi_buku_saat_dipinjam }}</td>
                </tr>
            @endforeach
        </tbody>
    </table>
</body>

</html>

pengembalian.blade.php

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Laporan Pengembalian Perpus</title>
</head>

<body>
    <center>
        <h1>Laporan Pengembalian Perpus</h1>
        <h4>{{ $identitas->alamat_app }}</h4>
        <h4>{{ $identitas->email_app }} | {{ $identitas->nomor_hp }}</h4>
        <br>
    </center>

    <table>
        <thead>
            <tr>
                <th style="border: 1px solid black">No.</th>
                <th style="border: 1px solid black">Nama</th>
                <th style="border: 1px solid black">Judul Buku</th>
                <th style="border: 1px solid black">Tanggal Peminjaman</th>
                <th style="border: 1px solid black">Tanggal Pengembalian</th>
                <th style="border: 1px solid black">Kondisi Buku Saat Dipinjam</th>
                <th style="border: 1px solid black">Kondisi Buku Saat Dikembalikan</th>
                <th style="border: 1px solid black">Denda</th>
            </tr>
        </thead>
        <tbody>
            @foreach ($pengembalian as $key => $p)
                <tr>
                    <td style="border: 1px solid black">{{ $key + 1 }}</td>
                    <td style="border: 1px solid black">{{ $p->user->fullname }}</td>
                    <td style="border: 1px solid black">{{ $p->buku->judul }}</td>
                    <td style="border: 1px solid black">{{ $p->tanggal_peminjaman }}</td>
                    <td style="border: 1px solid black">{{ $p->tanggal_pengembalian }}</td>
                    <td style="border: 1px solid black">{{ $p->kondisi_buku_saat_dipinjam }}</td>
                    <td style="border: 1px solid black">{{ $p->kondisi_buku_saat_dikembalikan }}</td>
                    <td style="border: 1px solid black">{{ $p->denda }}</td>
                </tr>
            @endforeach
        </tbody>
    </table>
</body>

</html>

user.blade.php

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Laporan Pengembalian Perpus</title>
</head>

<body>
    <center>
        <h1>Laporan Pengembalian Perpus</h1>
        <h4>{{ $identitas->alamat_app }}</h4>
        <h4>{{ $identitas->email_app }} | {{ $identitas->nomor_hp }}</h4>
        <br>
    </center>

    <table>
        <thead>
            <tr>
                <th style="border: 1px solid black">No.</th>
                <th style="border: 1px solid black">Nama</th>
                <th style="border: 1px solid black">Judul Buku</th>
                <th style="border: 1px solid black">Tanggal Peminjaman</th>
                <th style="border: 1px solid black">Tanggal Pengembalian</th>
                <th style="border: 1px solid black">Kondisi Buku Saat Dipinjam</th>
                <th style="border: 1px solid black">Kondisi Buku Saat Dikembalikan</th>
                <th style="border: 1px solid black">Denda</th>
            </tr>
        </thead>
        <tbody>
            @foreach ($user as $key => $a)
                <tr>
                    <td style="border: 1px solid black">{{ $key + 1 }}</td>
                    <td style="border: 1px solid black">{{ $a->user->username }}</td>
                    <td style="border: 1px solid black">{{ $a->buku->judul }}</td>
                    <td style="border: 1px solid black">{{ $a->tanggal_peminjaman }}</td>
                    <td style="border: 1px solid black">{{ $a->tanggal_pengembalian }}</td>
                    <td style="border: 1px solid black">{{ $a->kondisi_buku_saat_dipinjam }}</td>
                    <td style="border: 1px solid black">{{ $a->kondisi_buku_saat_dikembalikan }}</td>
                    <td style="border: 1px solid black">{{ $a->denda }}</td>
                </tr>
            @endforeach
        </tbody>
    </table>
</body>

</html>

		PDF

composer require barryvdh/laravel-dompdf

config/app.php

'providers' => [
	....
	Barryvdh\DomPDF\ServiceProvider::class,
],
 
  
'aliases' => [
	....
	'PDF' => Barryvdh\DomPDF\Facade::class,
]

view/admin/laporan

laporan_peminjaman_pdf.blade.php

<!DOCTYPE html>
<html>

<head>
    <title>Laporan Peminjaman</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>

<body>
    <style>
        .center {
            margin-left: auto;
            margin-right: auto;
        }

        .left {
            margin-left: 50px;
        }

        table {
            font-family: arial, sans-serif;
            font-size: 10px;
            border-collapse: collapse;
            width: 85%;
        }

        td,
        th {
            border: 1px solid #dddddd;
            text-align: left;
            padding: 8px;
        }
    </style>

    <div class="row">
        <div style="position:relative;">
            <div style="position:absolute; left:37px; top:15px; width:200px;">
                {{-- <img src="{{ public_path('assets/images/faces/1.jpg') }}" width="35%" class="" alt="Logo-Intek"
            style="border-radius:50%" /> --}}

            {{-- {{ public_path($identitas->foto) }} --}}
                <img src="#" width="35%" class="" alt="PHOTO"
                    style="border-radius:50%" />
            </div>
            <div style="margin-left:11px; text-align:center; font-family:sans-serif">
                <h2>{{ $identitas->nama_app }}</h2>
                <p style="font-size: 11px">
                    {{ $identitas->alamat_app }}
                    <br>
                    {{ $identitas->email_app }}
                    <br>
                    {{ $identitas->nomor_hp }}
                </p>
            </div>
        </div>

        <hr>
        <br />

        <h5 style="text-align: center; font-family:sans-serif;">Laporan Peminjaman
                Buku</span>
        </h5>

        <table class='table table-bordered'>
            <thead>
                <tr>
                    <th>No.</th>
                    <th>Nama</th>
                    <th>Judul Buku</th>
                    <th>Tanggal Peminjaman</th>
                    <th>Tanggal Pengembalian</th>
                    <th>Kondisi Buku</th>
                </tr>
            </thead>
            <tbody>
                @foreach ($peminjaman as $key => $p)
                    <tr>
                        <td>{{ $key + 1 }}</td>
                        <td>{{ $p->user->username }}</td>
                        <td>{{ $p->buku->judul }}</td>
                        <td>{{ $p->tanggal_peminjaman }}</td>
                        <td>{{ $p->tanggal_pengembalian }}</td>
                        <td>{{ $p->kondisi_buku_saat_dipinjam }}</td>
                    </tr>
                @endforeach
            </tbody>
        </table>

</body>

</html>

laporan_pengembalian_pdf.blade.php

<!DOCTYPE html>
<html>

<head>
    <title>Laporan Pengembalian</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>

<body>
    <style>
        .center {
            margin-left: auto;
            margin-right: auto;
        }

        .left {
            margin-left: 50px;
        }

        table {
            font-family: arial, sans-serif;
            font-size: 10px;
            border-collapse: collapse;
            width: 85%;
        }

        td,
        th {
            border: 1px solid #dddddd;
            text-align: left;
            padding: 8px;
        }
    </style>

    <div class="row">
        <div style="position:relative;">
            <div style="position:absolute; left:37px; top:15px; width:200px;">
                {{-- <img src="{{ public_path('assets/images/faces/1.jpg') }}" width="35%" class="" alt="Logo-Intek"
            style="border-radius:50%" /> --}}

                {{-- {{ public_path($identitas->foto) }} --}}
                <img src="#" width="35%" class="" alt="PHOTO" style="border-radius:50%" />
            </div>
            <div style="margin-left:11px; text-align:center; font-family:sans-serif">
                <h2>{{ $identitas->nama_app }}</h2>
                <p style="font-size: 11px">
                    {{ $identitas->alamat_app }}
                    <br>
                    {{ $identitas->email_app }}
                    <br>
                    {{ $identitas->nomor_hp }}
                </p>
            </div>
        </div>

        <hr>
        <br />

        <h5 style="text-align: center; font-family:sans-serif;">Laporan Pengembalian
            Buku</span>
        </h5>

        <table class='table table-bordered'>
            <thead>
                <tr>
                    <th>No.</th>
                    <th>Nama</th>
                    <th>Judul Buku</th>
                    <th>Tanggal Peminjaman</th>
                    <th>Tanggal Pengembalian</th>
                    <th>Kondisi Buku</th>
                    <th>Denda</th>
                </tr>
            </thead>
            <tbody>
                @foreach ($pengembalian as $key => $p)
                    <tr>
                        <td>{{ $key + 1 }}</td>
                        <td>{{ $p->user->username }}</td>
                        <td>{{ $p->buku->judul }}</td>
                        <td>{{ $p->tanggal_peminjaman }}</td>
                        <td>{{ $p->tanggal_pengembalian }}</td>
                        <td>{{ $p->kondisi_buku_saat_dipinjam }}</td>
                        <td>{{ $p->denda == 0 ? 'Tidak Ada' : 'Rp' . '.' . $p->denda }}</td>
                    </tr>
                @endforeach
            </tbody>
        </table>

</body>

</html>

laporan_siswa_pdf.blade.php

<!DOCTYPE html>
<html>

<head>
    <title>Laporan Anggota ({{ $nama->fullname }})</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>

<body>
    <style>
        .center {
            margin-left: auto;
            margin-right: auto;
        }

        .left {
            margin-left: 50px;
        }

        table {
            font-family: arial, sans-serif;
            font-size: 10px;
            border-collapse: collapse;
            width: 85%;
        }

        td,
        th {
            border: 1px solid #dddddd;
            text-align: left;
            padding: 8px;
        }
    </style>

    <div class="row">
        <div style="position:relative;">
            <div style="position:absolute; left:37px; top:15px; width:200px;">
                {{-- <img src="{{ public_path('assets/images/faces/1.jpg') }}" width="35%" class="" alt="Logo-Intek"
            style="border-radius:50%" /> --}}

                {{-- {{ public_path($identitas->foto) }} --}}
                <img src="#" width="35%" class="" alt="PHOTO" style="border-radius:50%" />
            </div>
            <div style="margin-left:11px; text-align:center; font-family:sans-serif">
                <h2>{{ $identitas->nama_app }}</h2>
                <p style="font-size: 11px">
                    {{ $identitas->alamat_app }}
                    <br>
                    {{ $identitas->email_app }}
                    <br>
                    {{ $identitas->nomor_hp }}
                </p>
            </div>
        </div>

        <hr>
        <br />

        <h5 style="text-align: center; font-family:sans-serif;">Laporan User
            Buku</span>
        </h5>

        <table class='table table-bordered'>
            <thead>
                <tr>
                    <th>No.</th>
                    <th>Nama</th>
                    <th>Judul Buku</th>
                    <th>Tanggal Peminjaman</th>
                    <th>Tanggal Pengembalian</th>
                </tr>
            </thead>
            <tbody>
                @foreach ($anggota as $key => $a)
                    <tr>
                        <td>{{ $key + 1 }}</td>
                        <td>{{ $a->user->username }}</td>
                        <td>{{ $a->buku->judul }}</td>
                        <td>{{ $a->tanggal_peminjaman }}</td>
                        <td>{{ $a->tanggal_pengembalian }}</td>
                    </tr>
                @endforeach
            </tbody>
        </table>

</body>

</html>

laporan.blade.php

@extends('layouts.master')

@section('content')
    <div class="row">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title">Cetak Laporan E - Perpus <span class="" style="color: red">PDF</span> </h5>
                </div>
                <div class="card-body">
                    <ul class="nav nav-tabs" id="myTab1" role="tablist">
                        <li class="nav-item" role="presentation">
                            <a class="nav-link active" id="home-tab" data-bs-toggle="tab" href="#home" role="tab"
                                aria-controls="home" aria-selected="true">Laporan Peminjaman</a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="profile-tab" data-bs-toggle="tab" href="#profile" role="tab"
                                aria-controls="profile" aria-selected="false">Laporan Pengembalian</a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="contact-tab" data-bs-toggle="tab" href="#contact" role="tab"
                                aria-controls="contact" aria-selected="false">Laporan Siswa</a>
                        </li>
                    </ul>
                    <div class="tab-content" id="myTabContent">
                        <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                            <br>

                            {{-- Form Peminjaman --}}
                            <form action="{{ route('admin.laporan_peminjaman') }}" method="POST" target="_blank">
                                @csrf
                                <div class="mt-4">
                                    <label for="">Tanggal Peminjaman</label>
                                    <input class="form-control" type="date" name="tanggal_peminjaman" id=""
                                        required>
                                </div>
                                <div class="row mt-3">
                                    <button class="btn btn-primary" type="submit">Export to PDF</button>
                                </div>
                            </form>
                        </div>

                        {{-- Form Pengembalian --}}
                        <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                            <br>

                            <form action="{{ route('admin.laporan_pengembalian') }}" method="POST" target="_blank">
                                @csrf
                                <div class="mt-4">
                                    <label for="">Tanggal Pengembalian</label>
                                    <input class="form-control" type="date" name="tanggal_pengembalian" id=""
                                        required>
                                </div>
                                <div class="row mt-3">
                                    <button class="btn btn-danger" type="submit">Export to PDF</button>
                                </div>

                            </form>
                        </div>

                        {{-- Form Siswa --}}
                        <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">
                            <br>

                            <form action="{{ route('admin.laporan_user') }}" method="POST" target="_blank">
                                @csrf
                                <div class="col-md-12 mb-4">
                                    <h6>Nama Siswa</h6>
                                    <div class="form-group">
                                        <select name="user_id" class="choices form-select">
                                            @foreach ($anggota as $a)
                                                <option value="{{ $a->id }}">{{ $a->username }}</option>
                                            @endforeach
                                        </select>
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <button class="btn btn-primary" type="submit">Export to PDF</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        {{-- CETAK EXCEL --}}
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title">Cetak Laporan E - Perpus <span class="" style="color:green">Excel</span></h5>
                </div>
                <div class="card-body">
                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <a class="nav-link active" id="home-tab" data-bs-toggle="tab" href="#home1" role="tab"
                                aria-controls="home" aria-selected="true">Laporan Peminjaman</a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="profile-tab" data-bs-toggle="tab" href="#profile1" role="tab"
                                aria-controls="profile" aria-selected="false">Laporan Pengembalian</a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="contact-tab" data-bs-toggle="tab" href="#contact1" role="tab"
                                aria-controls="contact" aria-selected="false">Laporan Siswa</a>
                        </li>
                    </ul>
                    <div class="tab-content" id="myTabContent">
                        <div class="tab-pane fade show active" id="home1" role="tabpanel" aria-labelledby="home-tab">
                            <br>

                            {{-- Form Peminjaman --}}
                            <form action="{{ route('admin.laporan_excel') }}" method="POST" target="_blank">
                                @csrf
                                <div class="mt-4">
                                    <label for="">Tanggal Peminjaman</label>
                                    <input class="form-control" type="date" name="tanggal_peminjaman" id=""
                                        required>
                                </div>
                                <div class="row mt-3">
                                    <button class="btn btn-success" type="submit">Export to Excel</button>
                                </div>
                            </form>
                        </div>

                        {{-- Form Pengembalian --}}
                        <div class="tab-pane fade" id="profile1" role="tabpanel" aria-labelledby="profile-tab">
                            <br>

                            <form action="{{ route('admin.excel_pengembalian') }}" method="POST" target="_blank">
                                @csrf
                                <div class="mt-4">
                                    <label for="">Tanggal Pengembalian</label>
                                    <input class="form-control" type="date" name="tanggal_pengembalian" id=""
                                        required>
                                </div>
                                <div class="row mt-3">
                                    <button class="btn btn-success" type="submit">Export to Excel</button>
                                </div>

                            </form>
                        </div>

                        {{-- Form Siswa --}}
                        <div class="tab-pane fade" id="contact1" role="tabpanel" aria-labelledby="contact-tab">
                            <br>

                            <form action="{{ route('admin.excel_user') }}" method="POST" target="_blank">
                                @csrf
                                <div class="col-md-12 mb-4">
                                    <h6>Nama Siswa</h6>
                                    <div class="form-group">
                                        <select name="user_id" class="choices form-select">
                                            @foreach ($anggota as $a)
                                                <option value="{{ $a->id }}">{{ $a->username }}</option>
                                            @endforeach
                                        </select>
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <button class="btn btn-success" type="submit">Export to Excel</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>


            </div>
        </div>
    </div>
@endsection

php artisan make:controller Admin/LaporanController --resource

<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\Identitas;
use App\Models\Peminjaman;
use App\Models\User;
use Illuminate\Http\Request;
use Barryvdh\DomPDF\Facade\Pdf;
use App\Exports\LaporanExport;
use App\Exports\PengembalianExport;
use App\Exports\UserExport;
use Maatwebsite\Excel\Facades\Excel;


class LaporanController extends Controller
{
    public function index()
    {
        $anggota = User::where('role', 'user')->get();
        return view('admin.laporan.laporan', compact('anggota'));
    }

    public function laporan_pdf(Request $request)
    {
        $identitas = Identitas::first();
        if ($request->tanggal_peminjaman) {
            $peminjaman = Peminjaman::where('tanggal_peminjaman', $request->tanggal_peminjaman)->get();
            $count = Peminjaman::where('tanggal_peminjaman', $request->tanggal_peminjaman)->count();
            $tanggal = $request->tanggal_peminjaman;
            $pdf = PDF::loadview('admin.laporan.laporan_peminjaman_pdf', ['count' => $count, 'identitas' => $identitas, 'peminjaman' => $peminjaman, 'tanggal' => $tanggal]);
            return $pdf->stream('laporan-peminjaman-pdf.pdf');
        }
        if ($request->tanggal_pengembalian) {
            $pengembalian = Peminjaman::where('tanggal_pengembalian', $request->tanggal_pengembalian)->get();
            $count = Peminjaman::where('tanggal_pengembalian', $request->tanggal_pengembalian)->count();
            $tanggal = $request->tanggal_pengembalian;
            $pdf = PDF::loadview('admin.laporan.laporan_pengembalian_pdf', ['count' => $count, 'identitas' => $identitas, 'pengembalian' => $pengembalian, 'tanggal' => $tanggal]);
            return $pdf->stream('laporan-pengembalian-pdf.pdf');
        }
        if ($request->user_id) {
            $anggota = Peminjaman::where('user_id', $request->user_id)->get();
            $count = Peminjaman::where('user_id', $request->user_id)->count();
            $nama = User::where('id', $request->user_id)->first();
            $pdf = PDF::loadview('admin.laporan.laporan_siswa_pdf', ['count' => $count, 'identitas' => $identitas, 'identitas' => $identitas, 'anggota' => $anggota, 'nama' => $nama]);
            return $pdf->stream('laporan-user-pdf.pdf');
        }
    }

    public function laporan_excel(Request $request){
        return Excel::download(new LaporanExport($request->tanggal_peminjaman), 'laporan-peminjaman.xlsx');
    }

    public function excelPengembalian(Request $request){
        return Excel::download(new PengembalianExport($request->tanggal_pengembalian), 'laporan-pengembalian.xlsx');
    }

    public function excelUser(Request $request){
        return Excel::download(new UserExport($request->user_id), 'laporan-anggota.xlsx');
    }
}

KALO MERAH CLOSE AJA NO PROBLEM

35. Identitas 

php artisan make:controller Admin/IdentitasController --resource

<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\Identitas;
use Illuminate\Http\Request;

class IdentitasController extends Controller
{
    public function index()
    {
        $identitas = Identitas::first();
        return view('admin.identitas', compact('identitas'));
    }

    public function update(Request $request)
    {

        $identitas = Identitas::first();
        if ($request->foto == null) {
            $identitas->update([
                'nama_app' => $request->nama_app,
                'email_app' => $request->email_app,
                'nomor_hp' => $request->nomor_hp,
                'alamat_hp' => $request->alamat_hp,
            ]);
        } else {
            $imageName = time() . '.' . $request->foto->extension();
            $request->foto->move(public_path('img'), $imageName);
            $identitas->update([
                'nama_app' => $request->nama_app,
                'email_app' => $request->email_app,
                'nomor_hp' => $request->nomor_hp,
                'alamat_hp' => $request->alamat_hp,
                "foto" => "/img/" . $imageName
            ]);
        }
    return redirect()->back()->with("status", "danger")->with('message', 'Gagal mengubah profile');

    }
}

buat view di admin/identitas.blade.php

@extends('layouts.master')
@section('content')
    <div class="mb-3">
        <center>
            <h3>Identitas Aplikasi</h3>
        </center>
    </div>
    <div class="mb-3">
        <center>
            <img src="{{ $identitas->foto }}" class="rounded-circle" style="width: 150px;" alt="Avatar" />

        </center>

    </div>

    <form class="form form-vertical" action="{{ url('admin/edit/identitas') }}" method="POST" enctype="multipart/form-data">
        @csrf
        @method('put')
        <div class="card">
            <div class="card-header">
                <h4 class="card-title">Edit Identitas Aplikasi</h4>
            </div>
            <div class="card-body">
                <table class="table table-striped table bordered">
                    <tr>
                        <th>Foto</th>
                        <td>
                            <input type="file" class="form-control" name="foto" />
                        </td>
                    </tr>
                    <tr>
                        <th>Nama Applikasi</th>
                        <td>
                            <input type="text" class="form-control" name="nama_app" value="{{ $identitas->nama_app }}" />
                        </td>
                    </tr>

                    <tr>
                        <th>Alamat Lengkap</th>
                        <td>
                            <textarea class="form-control" name="alamat_app" id="exampleFormControlTextarea1" rows="3">{{ $identitas->alamat_app }}</textarea>
                        </td>
                    </tr>

                    <tr>
                        <th>Email</th>
                        <td>
                            <input type="email" class="form-control" name="email_app"
                                value="{{ $identitas->email_app }}" />
                        </td>
                    </tr>

                    <tr>
                        <th>No Telp</th>
                        <td>
                            <input type="number" class="form-control" name="nomor_hp" value="{{ $identitas->nomor_hp }}" />
                        </td>
                    </tr>

                </table>

                <div class="col-12 d-flex justify-content-start">
                    <button type="submit" class="btn btn-primary me-1 mb-1">
                        Submit
                    </button>
                </div>
            </div>
        </div>
    </form>
    </div>
    </div>
    </div>
@endsection

36. Pesan

php artisan make:controller Admin/PesanController --resource

<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\Pesan;
use App\Models\User;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;

class PesanController extends Controller
{
    //Pesan Masuk
    public function pesanMasuk(Request $request){
        $pesan = Pesan::where('pengirim_id', '!=', Auth::user()->id)
        ->where('penerima_id', Auth::user()->id)
        ->get();

        $notif = Pesan::where('id', $request->status)->first();
        if ($request->status == 'terkirim') {
            $notif->update([
                'terkirim'=> $notif->terkirim + 1
            ]);
        }
        return view('admin.pesan.masuk', compact('pesan'));
    }

    public function ubah_status(Request $request){
        $request = Pesan::where('id', $request->id)->first();
        $request->update([
            'status' => 'dibaca'
        ]);
        return redirect()->route('admin.pesan_masuk');
    }

    //Pesan Terkirim
    public function pesanTerkirim(Request $request){
        $pesan = Pesan::where('penerima_id', '!=', Auth::user()->id)
        ->where('pengirim_id', Auth::user()->id)
        ->get();
        $penerimas = User::where('role', 'user')
        ->get();
        return view('admin.pesan.terkirim', compact('pesan', 'penerimas'));
    }

    public function kirimPesan(Request $request){
        $pesan = Pesan::create($request->all());
        $user = User::where('id', $request->penerima_id)->first();
        return redirect()
            ->back()
            ->with('status', 'success')
            ->with('message', "Berhasil mengirim pesan ke $user->fullname");
    }
}

buat view di admin/pesan/masuk.blade.php

@extends('layouts.master')
@section('content')
    @if (session('status'))
        <div class="alert alert-{{ session('status') }}alert-dismissible fade show" role="alert">
            {{ session('message') }}

            <button type="button" class="btn-close" data-bs-dismiss="alert">
                aria-label="Close"
            </button>
        </div>
    @endif
    <div class="row">
        <div class="col-9">
            <h3>Pesan Masuk</h3>
            <p class="text-subtitle text-muted">Pesan Dari Admin</p>
        </div>
    </div>
    <section class="section">
        <div class="card">
            <div class="card-body">

                <table class="table table-striped" id="table1">
                    <thead>
                        <tr>
                            <th>No.</th>
                            <th>Pengirim</th>
                            <th>Judul Pesan</th>
                            <th>Isi Pesan</th>
                            <th>Status Pesan</th>
                            <th>Tanggal Kirim</th>
                            {{-- <th>Aksi</th> --}}
                        </tr>
                    </thead>
                    <tbody>
                        @foreach ($pesan as $key => $p)
                            <tr>
                                <td>{{ $key + 1 }}</td>
                                <td>{{ $p->pengirim->fullname }}</td>
                                <td>{{ $p->judul }}</td>
                                <td>{{ $p->isi }}</td>
                                <td>{{ $p->status == 'terkirim' ? 'Belum Dibaca' : 'Terbaca' }}</td>
                                <td>{{ $p->tanggal_kirim }}</td>
                                <td>
                                    @if ($p->status == 'terkirim')
                                        <form action="{{ route('admin.ubah_status', ['id' => $p->id]) }}" method="POST">
                                            @csrf
                                            <input type="hidden" name="penerima_id" value="{{ Auth::user()->id }}">
                                            <button type="submit" class="btn btn-success">
                                                <i class="bi bi-check-lg"></i>
                                            </button>
                                        </form>
                                    @else
                                        <button class="btn btn-primary"><i class="bi bi-check2-all"></i></button>
                                    @endif
                                </td>
                            </tr>
                        @endforeach
                    </tbody>
                </table>
            </div>
        </div>
    </section>
    {{-- </div> --}}
    </div>
@endsection

buat view di admin/pesan/terkirim.blade.php

@extends('layouts.master')
@section('content')
    @if (session('status'))
        <div class="alert alert-{{ session('status') }}">
            {{ session('message') }}
        </div>
    @endif
    <div class="row">
        <div class="col-9">
            <h3>Pesan Terkirim</h3>
            <p class="text-subtitle text-muted">Kirim Pesan Ke Anggota</p>
        </div>
    </div>
    <section class="section">
        <div class="card">
            <div class="card-body">
                <button type="button" class="btn shadow btn-primary mb-3" data-bs-toggle="modal"
                    data-bs-target="#exampleModal"><i class="bi bi-send"></i>
                    Kirim Pesan
                </button>
                <!-- Modal ADD DATA -->
                <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                    aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Tambah Pesan</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                            </div>
                            <form method="POST" action={{ route('admin.kirim_pesan') }} enctype="multipart/form-data">
                                @csrf
                                @method('POST')
                                <div class="modal-body">
                                    <div class="mb-3">
                                        <input type="hidden" name="pengirim_id" value= "{{ Auth::user()->id }}" >
                                    </div>

                                    <div class="mb-3">
                                        <label>Penerima</label>
                                        <select class="form-select" name="penerima_id" required>
                                            <option value="" disabled selected>--PILIH OPSI--</option>
                                            @foreach ($penerimas as $b)
                                                <option value="{{ $b->id }}">
                                                    {{ $b->fullname }}</option>
                                            @endforeach
                                        </select>
                                    </div>

                                    <div class="mb-3">
                                        <label for="formGroupExampleInput" class="form-label">Judul Pesan</label>
                                        <input type="text" class="form-control" id="formGroupExampleInput"
                                            placeholder="masukkan judul pesan" name="judul" required>
                                    </div>

                                    <div class="form-group mb-3">
                                        <label for="exampleFormControlTextarea1" class="form-label">Isi Pesan</label>
                                        <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" name="isi" required></textarea>
                                    </div>

                                    <div class="mb-3">
                                        <label for="formGroupExampleInput" class="form-label">Tanggal Kirim</label>
                                        <input type="date" class="form-control" id="formGroupExampleInput"
                                            placeholder="Nama Siswa" name="tanggal_kirim" readonly value="{{ date('Y-m-d') }}">
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
                                    <button type="submit" class="btn btn-primary">Kirim Pesan</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <!-- Modal ADD DATA -->

                <table class="table table-striped" id="table1">
                    <thead>
                        <tr>
                            <th>No.</th>
                            <th>Penerima</th>
                            <th>Judul Pesan</th>
                            <th>Isi Pesan</th>
                            <th>Status Pesan</th>
                            <th>Tanggal Kirim</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach ($pesan as $key => $p)
                            <tr>
                                <td>{{ $key + 1 }}</td>
                                <td>{{ $p->penerima->fullname }}</td>
                                <td>{{ $p->judul }}</td>
                                <td>{{ $p->isi }}</td>
                                <td>{{ $p->status }}</td>
                                <td>{{ $p->tanggal_kirim }}</td>
                            </tr>
                        @endforeach
                    </tbody>
                </table>
            </div>
        </div>
    </section>
    {{-- </div> --}}
    </div>

@endsection

			BUAT USER

37. Dashboard

php artisan make:controller User/DashboardController --resource

<?php

namespace App\Http\Controllers\User;

use App\Http\Controllers\Controller;
use App\Models\Buku;
use App\Models\Kategori;
use App\Models\Pemberitahuan;
use Illuminate\Http\Request;

class DashboardController extends Controller
{

    public function index()
    {
        $kategori = Kategori::get();
        $pemberitahuans = Pemberitahuan::where('status', 'aktif')->get();
        $bukus = Buku::all();
        return view('user.dashboard', compact('kategori', 'pemberitahuans', 'bukus'));
    }
}

views/user/dashboard.blade.php

@extends('layouts.master')

@section('content')
    <div class="row">
        <div class="col">
            @foreach ($pemberitahuans as $pemberitahuan)
                <div class="alert alert-primary" role="alert">
                    {{ $pemberitahuan->isi }}
                </div>
            @endforeach

            <div class="row">
                @foreach ($kategori as $k)
                    @if ($k->bukus->count() < 1)
                        {{ null }}
                    @else
                        <div class="col-12">
                            <h4>
                                <span class="badge bg-light-danger">{{ $k->nama }}</span>
                            </h4>
                            <div class="row">
                                @foreach ($k->bukus as $buku)
                                    <div class="col-3">
                                        <div class="card"style="max-height:500px; min-height:425px">
                                            <div class="card-header">
                                                <img src="{{ $buku->foto ?? '/assets/images/not-found.png' }}"
                                                    style="height: 150px;object-fit: cover;" class="card-img"
                                                    alt="....">
                                            </div>
                                            <div class="card-body">
                                                <h4 style="font-size: 24px; font-weight: bold">
                                                    {{ $buku->judul }}
                                                </h4>
                                                <span class="badge bg-secondary">{{ $buku->kategori->nama }}
                                                </span>

                                                <div class="row">
                                                    <div class="col-6">
                                                        <p class="text-start">
                                                            {{ $buku->pengarang }}
                                                        </p>
                                                    </div>
                                                    <div class="col-6">
                                                        <p class="text-end">{{ $buku->penerbit->nama }}</p>
                                                    </div>
                                                </div>

                                            </div>

                                            <div class="card-footer">
                                                <form method="POST" action="{{ route('user.form_peminjaman_dashboard') }}">
                                                    @csrf
                                                    <input type="hidden" value="{{ $buku->id }}" name="buku_id">
                                                    <button type="submit" class="btn btn-primary">Pinjam</button>
                                                </form>
                                            </div>

                                        </div>
                                    </div>
                                @endforeach
                            </div>
                        </div>
                    @endif
                @endforeach
            </div>
        @endsection

38. Peminjaman

php artisan make:controller User/PeminjamanController --resource

<?php

namespace App\Http\Controllers\User;

use App\Http\Controllers\Controller;
use App\Models\Buku;
use App\Models\Pemberitahuan;
use App\Models\Peminjaman;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;

class PeminjamanController extends Controller
{

    //RIWAYAT PEMINJAMAN
    public function riwayatPeminjaman()
    {
        $peminjamans = Peminjaman::where('user_id' , Auth::user()->id)->get();
        return view('user.peminjaman.riwayat' , compact('peminjamans'));
    }

    //FORM PEMINJAMAN
    public function peminjamanForm()
    {
        $bukus = Buku::all();
        return view('user.peminjaman.form' , compact('bukus'));
    }

    public function formDasboard(Request $request)
    {
        $buku_id = $request->buku_id;
        $bukus = Buku::all();

        return view('user.peminjaman.form' , compact('bukus' , 'buku_id'));
    }

    //SUBMIT FORM PEMINJAMAN
    public function submitForm(Request $request){
        $cek_total_peminjaman = Peminjaman::where('user_id', Auth::user()->id)
        ->where('tanggal_pengembalian', null)->count();

        //maks 5
        if ($cek_total_peminjaman >= 5) {
            return redirect()->back()
            ->with("status", "danger")
            ->with("message", "Tidak Bisa Meminjam Buku Lebih Dari 5");
        }

        //cannot be same
        $cek_buku = Peminjaman::where('buku_id', $request->buku_id)
        ->where('user_id', Auth::user()->id)
        ->first();
        if ($cek_buku) {
            return redirect()->route('user.form_peminjaman')
            ->with("status", "danger")
            ->with("message", "Tidak Bisa Meminjam Buku Dengan Judul Yang Sama");
        }

        //nambah peminjaman
        $peminjaman = Peminjaman::create($request->all());

        //mengurangi jumlah buku baik & rusak saat dipinjam
        $buku = Buku::where('id', $request->buku_id)->first();
        if ($request->kondisi_buku_saat_dipinjam == 'baik') {
            $buku->update([
                'j_buku_baik'=> $buku->j_buku_baik - 1
            ]);
        }
        if ($request->kondisi_buku_saat_dipinjam == 'rusak') {
            $buku->update([
                'j_buku_rusak'=> $buku->j_buku_rusak - 1
            ]);
        }

        // Update Pemberitahuan
        Pemberitahuan::create([
            "isi" => Auth::user()->username . " Meminjam Buku " . $buku->judul
        ]);

        if($peminjaman){
            return redirect()->route("user.riwayat_peminjaman")
                ->with("status", "success")
                ->with("message", "Berhasil Menambah Data");
        }
        return redirect()->back()
            ->with("status", "danger")
            ->with("message", "Gagal menambah data");

    }
}

buat view di user/peminjaman

form.blade.php

@extends('layouts.master')

@section('content')
        @if (session('status'))
            <div class="alert alert-{{ session('status') }}">
                {{ session('message') }}
            </div>
        @endif
        <div class="card">
            <div class="card-header">
                <h4>Form Peminjaman</h4>
            </div>
            <div class="card-body">
                <form class="form-group" method="POST" action="{{ Route('user.submit_peminjaman') }}">
                    
                    @csrf
                    <div class="mb-3">
                        <label>Nama</label>
                        <input class="form-control" name="user_id" readonly value="{{ Auth::user()->username }}"
                            required>
                    </div>
                    <div class="mb-3">
                        <label>Pilih Buku</label>
                        <select class="form-select" name="buku_id" required>
                            <option value="" disabled selected>--PILIH OPSI--</option>
                            @foreach ($bukus as $b)
                                <option value="{{ $b->id }}"
                                    {{ isset($buku_id) ? ($buku_id == $b->id ? 'selected' : '') : '' }}>
                                    {{ $b->judul }}</option>
                            @endforeach
                        </select>
                    </div>
                    <div class="mb-3">
                        <label>Tanggal Peminjaman</label>
                        <input type="date" class="form-control" name="tanggal_peminjaman" readonly value="{{ date('Y-m-d') }}"
                            required>
                    </div>
                    <div class="mb-3">
                        <label>Kondisi Buku</label>
                        <select class="form-select" name="kondisi_buku_saat_dipinjam" required>
                            <option value="" disabled selected>--PILIH OPSI--</option>
                            <option value="baik">Baik</option>
                            <option value="rusak">Rusak</option>
                        </select>
                    </div>
                    <div class="row mt-3">
                        <input type="hidden" value="{{ Auth::user()->id }}" name="user_id">
                        <button class="btn btn-primary" type="submit">S U B M I T</button>
                    </div>
            </div>
        </div>
    @endsection

riwayat.blade.php

@extends('layouts.master')
@section('content')
    @if (session('status'))
        <div class="alert alert-{{ session('status') }}">
            {{ session('message') }}
        </div>
    @endif
    <div class="row">
        <div class="col-9">
            <h4>Buku yang sedang dipinjam</h4>
        </div>
    </div>
    <section class="section">
        <div class="card">
            <div class="card-body">
                <table class="table table-striped" id="table1">
                    <thead>
                        <tr>
                            <th>No.</th>
                            <th>Nama</th>
                            <th>Judul Buku</th>
                            <th>Tanggal Peminjaman</th>
                            <th>Tanggal Pengembalian</th>
                            <th>Kondisi Buku</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach ($peminjamans as $key => $peminjaman)
                            <tr>
                                <td>{{ $key + 1 }}</td>
                                <td>{{ $peminjaman->user->username }}</td>
                                <td>{{ $peminjaman->buku->judul }}</td>
                                <td>{{ $peminjaman->tanggal_peminjaman }}</td>
                                <td>{{ $peminjaman->tanggal_pengembalian }}</td>
                                <td>{{ $peminjaman->kondisi_buku_saat_dipinjam }}</td>
                            </tr>
                        @endforeach
                    </tbody>
                </table>
            </div>
        </div>
    </section>
    {{-- </div> --}}
    </div>

    <!DOCTYPE html>
    <html lang="en">

    <head>
        <link rel="stylesheet" href="/assets/css/pages/simple-datatables.css">
    </head>

    <body>
        <script src="assets/js/app.js"></script>
        <script src="/assets/js/extensions/simple-datatables.js"></script>
    </body>

    </html>
@endsection

39. Pengembalian

php artisan make:controller User/PengembalianController --resource

<?php

namespace App\Http\Controllers\User;

use App\Http\Controllers\Controller;
use App\Models\Buku;
use App\Models\Pemberitahuan;
use App\Models\Peminjaman;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;

class PengembalianController extends Controller
{
    public function riwayatPengembalian()
    {
        $judul = Peminjaman::where('user_id', Auth::user()->id)
            ->where('tanggal_pengembalian', '!=', null)
            ->get();
            return view('user.pengembalian.riwayat', compact('judul'));
    }

    public function form_pengembalian()
    {
        $judul = Peminjaman::where('user_id', Auth::user()->id)
            ->where('tanggal_pengembalian', null)
            ->get();
        return view('user.pengembalian.form', compact('judul'));
    }

    public function submit_pengembalian(Request $request)
    {
        $pengembalian = Peminjaman::where('user_id', $request->user_id)
            ->where('buku_id', $request->buku_id)
            ->where('tanggal_pengembalian', null)
            ->first();

            $pengembalian->update([
                'tanggal_pengembalian' => $request->tanggal_pengembalian,
                'kondisi_buku_saat_dikembalikan' => $request->kondisi_buku_saat_dikembalikan
            ]);

            $buku = Buku::where('id', $request->buku_id)->first();

            if ($request->kondisi_buku_saat_dikembalikan == 'baik') {
                $buku->update([
                    'j_buku_baik' => $buku ->j_buku_baik + 1
                ]);
            }

            if ($request->kondisi_buku_saat_dipinjam == 'rusak' && $request->kondisi_buku_saat_dikembalikan == 'rusak') {
                $buku->update([
                    'j_buku_rusak' => $buku ->j_buku_rusak + 1
                ]);
                $pengembalian->update([
                    'denda' => 0
                ]);
            }

            if ($request->kondisi_buku_saat_dipinjam != 'rusak' && $request->kondisi_buku_saat_dikembalikan == 'rusak') {
                $buku->update([
                    'j_buku_rusak' => $buku ->j_buku_rusak + 1
                ]);
                $pengembalian->update([
                    'denda' => 20000
                ]);
            }

            if ($request->kondisi_buku_saat_dikembalikan == "hilang") {
                $pengembalian->update([
                    'denda' => 50000
                ]);
            }

            //update pemberitahuan

            Pemberitahuan::create([
                "isi" => Auth::user()->username . " Berhasil mengembalikan buku " . $buku->judul
            ]);

        return redirect()->route('user.riwayat_pengembalian');
    }
}

buat view di user/pengembalian

form.blade.php

@extends('layouts.master')

@section('content')
    <div class="container">
        <div class="card">
            <div class="card-header">
                <h4>Form Pengembalian buku</h4>
            </div>
            <div class="card-body">
                <form class="form-group" method="POST" action="{{ Route('user.submit_pengembalian') }}">
                    @csrf
                    <div class="mb-3">
                        <label>Judul Buku</label>
                        <select class="form-select" name="buku_id" required>
                            <option value="" disabled selected>--PILIH OPSI--</option>
                            @foreach ($judul as $b)
                                <option value="{{ $b->buku->id }}">
                                    {{ $b->buku->judul }}</option>
                            @endforeach
                        </select>
                    </div>
                    <div class="mb-3">
                        <label>Tanggal Pengembalian</label>
                        <input type="date" class="form-control" name="tanggal_pengembalian" value="{{ date('Y-m-d') }}"
                            readonly>
                    </div>

                    <div class="mb-3">
                        <label>Kondisi Buku</label>
                        <select class="form-select" name="kondisi_buku_saat_dikembalikan" id="">
                            <option value="" disabled selected>--PILIH OPSI--</option>
                            <option value="baik">Baik</option>
                            <option value="rusak">Rusak (20.000)</option>
                            <option value="hilang">Hilang (50.000)</option>
                        </select>
                    </div>
                    <div class="row mt-3">
                        <input type="hidden" value="{{ Auth::user()->id }}" name="user_id">
                        <button class="btn btn-primary" type="submit">S U B M I T</button>
                    </div>
                </form>
            </div>
        </div>
    @endsection

riwayat.blade.php

@extends('layouts.master')
@section('content')
    @if (session('status'))
        <div class="alert alert-{{ session('status') }}">
            {{ session('message') }}
        </div>
    @endif
    <div class="row">
        <div class="col-9">
            <h4>Buku yang sudah dikembalikan</h4>
        </div>
        <div class="col-3">
            <a href="{{ Route('user.form_peminjaman') }}" class="btn btn-primary float">Pinjam</a>
        </div>
    </div>
    <section class="section">
        <div class="card">
            <div class="card-body">
                <table class="table table-striped" id="table1">
                    <thead>
                        <tr>
                            <th>No.</th>
                            <th>Nama</th>
                            <th>Judul Buku</th>
                            <th>Tanggal Peminjaman</th>
                            <th>Tanggal Pengembalian</th>
                            <th>Kondisi Dipinjam</th>
                            <th>Kondisi Dikembalikan</th>
                            <th>Denda</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach ($judul as $key => $peminjaman)
                            <tr>
                                <td>{{ $key + 1 }}</td>
                                <td>{{ $peminjaman->user->username }}</td>
                                <td>{{ $peminjaman->buku->judul }}</td>
                                <td>{{ $peminjaman->tanggal_peminjaman }}</td>
                                <td>{{ $peminjaman->tanggal_pengembalian }}</td>
                                <td>{{ $peminjaman->kondisi_buku_saat_dipinjam }}</td>
                                <td>{{ $peminjaman->kondisi_buku_saat_dikembalikan }}</td>
                                <td>{{ $peminjaman->denda }}</td>
                            </tr>
                        @endforeach
                    </tbody>
                </table>
            </div>
        </div>
    </section>
    </div>
@endsection

40. Pesan

php artisan make:controller User/PesanController --resource

<?php

namespace App\Http\Controllers\User;

use App\Http\Controllers\Controller;
use App\Models\Pesan;
use App\Models\User;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;

class PesanController extends Controller
{
    //KIRIM PESAN
    public function pesan_terkirim(){
        $pesan = Pesan::where('penerima_id', '!=', Auth::user()->id )
        ->where('pengirim_id', Auth::user()->id)
        ->get();
        $penerimas = User::where('role', 'admin')
        ->get();
        return view('user.pesan.terkirim', compact('pesan', 'penerimas'));
    }

    public function kirim_pesan(Request $request)
    {
        $pesan = Pesan::create($request->all());
        $admin = User::where('id', $request->penerima_id)->first();
        return redirect()
            ->back()
            ->with('status', 'success')
            ->with('message', "Berhasil mengirim pesan ke $admin->fullname");
    }

    //MASUK PESAN
    public function pesan_masuk(Request $request)
    {
        $masuk = Pesan::where('pengirim_id', '!=', Auth::user()->id)
        ->where('penerima_id', Auth::user()->id)
        ->get();

        $notif = Pesan::where('id', $request->status)->first();
        if ($request->status == 'terkirim') {
            $notif->update([
                'terkirim'=> $notif->terkirim + 1
            ]);
        }

        return view('user.pesan.masuk', compact('masuk'));
    }

    public function ubah_status(Request $request)
    {
        $status = Pesan::where('id', $request->id)->first();
        $status->update([
            'status' => 'dibaca'
        ]);
        return redirect()->route('user.pesan_masuk');
    }
}

view/user/pesan

masuk.blade.php

@extends('layouts.master')
@section('content')
    @if (session('status'))
        <div class="alert alert-{{ session('status') }}">
            {{ session('message') }}
        </div>
    @endif
    <div class="row">
        <div class="col-9">
            <h3>Pesan Masuk</h3>
            <p class="text-subtitle text-muted">Pesan Dari Admin</p>
        </div>
    </div>
    <section class="section">
        <div class="card">
            <div class="card-body">

                <table class="table table-striped" id="table1">
                    <thead>
                        <tr>
                            <th>No.</th>
                            <th>Pengirim</th>
                            <th>Judul Pesan</th>
                            <th>Isi Pesan</th>
                            <th>Status Pesan</th>
                            <th>Tanggal Kirim</th>
                            {{-- <th>Aksi</th> --}}
                        </tr>
                    </thead>
                    <tbody>
                        @foreach ($masuk as $key => $p)
                            <tr>
                                <td>{{ $key + 1 }}</td>
                                <td>{{ $p->pengirim->fullname }}</td>
                                <td>{{ $p->judul }}</td>
                                <td>{{ $p->isi }}</td>
                                <td>{{ $p->status == 'terkirim' ? 'Belum Dibaca' : 'Terbaca' }}</td>
                                <td>{{ $p->tanggal_kirim }}</td>
                                <td>
                                    @if ($p->status == 'terkirim')
                                        <form action="{{ route('user.ubah_status', ['id' => $p->id]) }}" method="POST">
                                            @csrf
                                            <input type="hidden" name="penerima_id" value="{{ Auth::user()->id }}">
                                            <button type="submit" class="btn btn-success">
                                                <i class="bi bi-check-lg"></i>
                                            </button>
                                        </form>
                                    @else
                                    <button class="btn btn-primary"><i class="bi bi-check2-all"></i></button>
                                    @endif
                                </td>
                            </tr>
                        @endforeach
                    </tbody>
                </table>
            </div>
        </div>
    </section>
    {{-- </div> --}}
    </div>

@endsection

terkirim.blade.php

@extends('layouts.master')
@section('content')
    @if (session('status'))
        <div class="alert alert-{{ session('status') }}">
            {{ session('message') }}
        </div>
    @endif
    <div class="row">
        <div class="col-9">
            <h3>Pesan Terkirim</h3>
            <p class="text-subtitle text-muted">Kirim Pesan Ke Admin</p>
        </div>
    </div>
    <section class="section">
        <div class="card">
            <div class="card-body">
                <button type="button" class="btn shadow btn-primary mb-3" data-bs-toggle="modal"
                    data-bs-target="#exampleModal"><i class="bi bi-send"></i>
                    Kirim Pesan
                </button>
                <!-- Modal ADD DATA -->
                <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                    aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Tambah Data Peserta Didik</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                            </div>
                            <form method="POST" action={{ route('user.kirim_pesan') }} enctype="multipart/form-data">
                                @csrf
                                @method('POST')
                                <div class="modal-body">
                                    <div class="mb-3">
                                        <input type="hidden" name="pengirim_id" value= "{{ Auth::user()->id }}" >
                                    </div>

                                    <div class="mb-3">
                                        <label>Penerima</label>
                                        <select class="form-select" name="penerima_id" required>
                                            <option value="" disabled selected>--PILIH OPSI--</option>
                                            @foreach ($penerimas as $b)
                                                <option value="{{ $b->id }}">
                                                    {{ $b->fullname }}</option>
                                            @endforeach
                                        </select>
                                    </div>

                                    <div class="mb-3">
                                        <label for="formGroupExampleInput" class="form-label">Judul Pesan</label>
                                        <input type="text" class="form-control" id="formGroupExampleInput"
                                            placeholder="masukkan judul pesan" name="judul" required>
                                    </div>

                                    <div class="form-group mb-3">
                                        <label for="exampleFormControlTextarea1" class="form-label">Isi Pesan</label>
                                        <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" name="isi" required></textarea>
                                    </div>

                                    <div class="mb-3">
                                        <label for="formGroupExampleInput" class="form-label">Tanggal Kirim</label>
                                        <input type="date" class="form-control" id="formGroupExampleInput"
                                            placeholder="Nama Siswa" name="tanggal_kirim" readonly value="{{ date('Y-m-d') }}">
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
                                    <button type="submit" class="btn btn-primary">Kirim Pesan</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <!-- Modal ADD DATA -->

                <table class="table table-striped" id="table1">
                    <thead>
                        <tr>
                            <th>No.</th>
                            <th>Penerima</th>
                            <th>Judul Pesan</th>
                            <th>Isi Pesan</th>
                            <th>Status Pesan</th>
                            <th>Tanggal Kirim</th>
                            {{-- <th>Aksi</th> --}}
                        </tr>
                    </thead>
                    <tbody>
                        @foreach ($pesan as $key => $p)
                            <tr>
                                {{-- @dd($p->penerima) --}}
                                <td>{{ $key + 1 }}</td>
                                <td>{{ $p->penerima->fullname }}</td>
                                <td>{{ $p->judul }}</td>
                                <td>{{ $p->isi }}</td>
                                <td>{{ $p->status }}</td>
                                <td>{{ $p->tanggal_kirim }}</td>
                                {{-- <td><button class="btn btn-danger"><i class="bi bi-trash"></i></button></td> --}}
                                {{-- <td><button class="btn btn-success"><i class="bi bi-check-lg"></i></button></td> --}}
                            </tr>
                        @endforeach
                    </tbody>
                </table>
            </div>
        </div>
    </section>
    {{-- </div> --}}
    </div>

@endsection

41. Profil 

php artisan make:controller User/ProfileController --resource

<?php

namespace App\Http\Controllers\User;

use App\Http\Controllers\Controller;
use App\Models\User;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;
use Illuminate\Support\Facades\Hash;

class ProfileController extends Controller
{
    public function profile(){
        return view('user.profile');
    }

    public function gambar(Request $request){
        $id = Auth::user()->id;

        $imageName = time() . '.' . $request->foto->extension();

        $request->foto->move(public_path('img'), $imageName);

        $user = User::find(Auth::user()->id)->update($request->all());

        $user2 = User::find($id)->update([
            "password" => Hash::make($request->password),
            "foto" => "/img/" . $imageName
        ]);

        if ($user && $user2) {
            return redirect()->back()->with("status", "success")->with("message", "Berhasil mengubah profil");
        }
        return redirect()->back()->with("status", "danger")->with("message", "Gagal mengubah profil");
    }
}

views/user/profile

@extends('layouts.master')

@section('content')
    <div class="row">
        @if (session('status'))
            <div class="alert alert-{{ session('status') }}" role="alert">
                {{ session('message') }}
            </div>
        @endif

        <div class="mb-3">
            <center>
                <h3>Profil Saya</h3>
            </center>
        </div>
        <div class="mb-3">
            <center>
                <img src="{{ Auth::user()->foto == null ? 'profile.png' : Auth::user()->foto }}" class="rounded-circle"
                    style="width: 150px;" alt="Avatar" />

            </center>

        </div>
        <form action="{{ Route('user.gambar') }}" method="POST" enctype="multipart/form-data">
            @csrf
            @method('PUT')
            <div class="card">
                <div class="card-header">
                    <h4>Update Profile</h4>
                </div>
                <div class="card-body">
                    <table class="table table-striped table bordered">
                        <tr>
                            <th>Foto</th>
                            <td>
                                <input type="file" class="form-control" name="foto">
                            </td>
                        </tr>
                        <tr>
                            <th>Nama Lengkap</th>
                            <td>
                                <input class="form-control" type="text" name="fullname"
                                    value="{{ Auth::user()->fullname }}">
                            </td>
                        </tr>

                        <tr>
                            <th>Username</th>
                            <td>
                                <input class="form-control" type="text" name="username"
                                    value="{{ Auth::user()->username }}">
                            </td>
                        </tr>

                        <tr>
                            <th>NIS</th>
                            <td>
                                <input class="form-control" type="text" name="nis" value="{{ Auth::user()->nis }}">
                            </td>
                        </tr>

                        <tr>
                            <th>Alamat</th>
                            <td>
                                <textarea name="alamat" class="form-control">{{ Auth::user()->alamat }}</textarea>
                            </td>
                        </tr>
                        <tr>
                            <th>Password</th>
                            <td>
                                <input class="form-control" type="password" name="password"
                                    placeholder="" autocomplete="" required>
                            </td>
                        </tr>

                        <tr>
                            <th>Kelas</th>
                            <td>
                                <input class="form-control" type="text" name="kelas" value="{{ Auth::user()->kelas }}">
                            </td>
                        </tr>

                    </table>

                </div>
                <div class="card-footer">
                    <button class="btn btn-primary">
                        Simpan
                    </button>
                </div>
            </div>
        </form>
    @endsection

42. Register Akun

php artisan make:controller UserRegister --resource

<?php

namespace App\Http\Controllers;

use App\Models\User;
use Carbon\Carbon;
use Illuminate\Http\Request;

class UserRegister extends Controller
{
    public function UserRegister (Request $request)
    {
        $kode = User::where('role', 'user')->count();

        $anggota = User::create([
            'kode' => 'A0' . $kode + 1,
            'nis' => $request->nis,
            'fullname' => $request->fullname,
            'username' => $request->username,
            'password' => bcrypt($request->password),
            'kelas' => $request->kelas,
            'verif' => 'unverified',
            'alamat' => $request->alamat,
            'role' => 'user',
            'join_date' => Carbon::now()
        ]);

        if ($anggota) {
            return redirect()->route('login')
                ->with('status', 'success')
                ->with('message', 'Berhasil registerasi, tunggu verifikasi admin');
        }

        return redirect()->back()
            ->with('status', 'danger')
            ->with('message', 'Gagal menambahkan data user');
    }
}

views/auth/register

@extends('layouts.app')

@section('content')
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header">{{ __('Register') }}</div>

                    <div class="card-body">
                        <form action="{{ route('user.register') }}" method="POST">

                            @csrf

                            <div class="form-group position-relative has-icon-left mb-4">
                                <input type="number" class="form-control form-control-xl" placeholder="NIS" name="nis"
                                    required>
                                <div class="form-control-icon">
                                    <i class="bi bi-alexa"></i>
                                </div>
                            </div>
                            <div class="form-group position-relative has-icon-left mb-4">
                                <input type="text" class="form-control form-control-xl" placeholder="Fullname"
                                    name="fullname" required>
                                <div class="form-control-icon">
                                    <i class="bi bi-person-plus"></i>
                                </div>
                            </div>
                            <div class="form-group position-relative has-icon-left mb-4">
                                <input type="text"
                                    class="form-control form-control-xl @error('username') is-invalid @enderror"
                                    placeholder="Username" name="username" required>
                                <div class="form-control-icon">
                                    <i class="bi bi-person"></i>
                                </div>
                                @error('username')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                @enderror
                            </div>
                            <div class="form-group position-relative has-icon-left mb-4">
                                <input type="password" class="form-control form-control-xl" placeholder="Password"
                                    autocomplete="new-password" required name="password">
                                <div class="form-control-icon">
                                    <i class="bi bi-shield-lock"></i>
                                </div>
                            </div>
                            <div class="form-group position-relative has-icon-left mb-4">
                                <input type="text" class="form-control form-control-xl" placeholder="Kelas" required
                                    name="kelas">
                                <div class="form-control-icon">
                                    <i class="bi bi-building"></i>
                                </div>
                            </div>
                            {{-- <div class="form-group position-relative has-icon-left mb-4">
                            <input type="text" class="form-control form-control-xl" placeholder="Alamat" required
                                name="alamat">
                            <div class="form-control-icon">
                                <i class="bi bi-envelope"></i>
                            </div>
                        </div> --}}
                            <button class="btn btn-primary btn-block btn-lg shadow-lg mt-5" type="submit">Sign Up</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
@endsection